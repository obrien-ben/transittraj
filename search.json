[{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"GNU General Public License","title":"GNU General Public License","text":"Version 3, 29 June 2007Copyright © 2007 Free Software Foundation, Inc. <http://fsf.org/> Everyone permitted copy distribute verbatim copies license document, changing allowed.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"preamble","dir":"","previous_headings":"","what":"Preamble","title":"GNU General Public License","text":"GNU General Public License free, copyleft license software kinds works. licenses software practical works designed take away freedom share change works. contrast, GNU General Public License intended guarantee freedom share change versions program–make sure remains free software users. , Free Software Foundation, use GNU General Public License software; applies also work released way authors. can apply programs, . speak free software, referring freedom, price. General Public Licenses designed make sure freedom distribute copies free software (charge wish), receive source code can get want , can change software use pieces new free programs, know can things. protect rights, need prevent others denying rights asking surrender rights. Therefore, certain responsibilities distribute copies software, modify : responsibilities respect freedom others. example, distribute copies program, whether gratis fee, must pass recipients freedoms received. must make sure , , receive can get source code. must show terms know rights. Developers use GNU GPL protect rights two steps: (1) assert copyright software, (2) offer License giving legal permission copy, distribute /modify . developers’ authors’ protection, GPL clearly explains warranty free software. users’ authors’ sake, GPL requires modified versions marked changed, problems attributed erroneously authors previous versions. devices designed deny users access install run modified versions software inside , although manufacturer can . fundamentally incompatible aim protecting users’ freedom change software. systematic pattern abuse occurs area products individuals use, precisely unacceptable. Therefore, designed version GPL prohibit practice products. problems arise substantially domains, stand ready extend provision domains future versions GPL, needed protect freedom users. Finally, every program threatened constantly software patents. States allow patents restrict development use software general-purpose computers, , wish avoid special danger patents applied free program make effectively proprietary. prevent , GPL assures patents used render program non-free. precise terms conditions copying, distribution modification follow.","code":""},{"path":[]},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_0-definitions","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"0. Definitions","title":"GNU General Public License","text":"“License” refers version 3 GNU General Public License. “Copyright” also means copyright-like laws apply kinds works, semiconductor masks. “Program” refers copyrightable work licensed License. licensee addressed “”. “Licensees” “recipients” may individuals organizations. “modify” work means copy adapt part work fashion requiring copyright permission, making exact copy. resulting work called “modified version” earlier work work “based ” earlier work. “covered work” means either unmodified Program work based Program. “propagate” work means anything , without permission, make directly secondarily liable infringement applicable copyright law, except executing computer modifying private copy. Propagation includes copying, distribution (without modification), making available public, countries activities well. “convey” work means kind propagation enables parties make receive copies. Mere interaction user computer network, transfer copy, conveying. interactive user interface displays “Appropriate Legal Notices” extent includes convenient prominently visible feature (1) displays appropriate copyright notice, (2) tells user warranty work (except extent warranties provided), licensees may convey work License, view copy License. interface presents list user commands options, menu, prominent item list meets criterion.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_1-source-code","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"1. Source Code","title":"GNU General Public License","text":"“source code” work means preferred form work making modifications . “Object code” means non-source form work. “Standard Interface” means interface either official standard defined recognized standards body, , case interfaces specified particular programming language, one widely used among developers working language. “System Libraries” executable work include anything, work whole, () included normal form packaging Major Component, part Major Component, (b) serves enable use work Major Component, implement Standard Interface implementation available public source code form. “Major Component”, context, means major essential component (kernel, window system, ) specific operating system () executable work runs, compiler used produce work, object code interpreter used run . “Corresponding Source” work object code form means source code needed generate, install, (executable work) run object code modify work, including scripts control activities. However, include work’s System Libraries, general-purpose tools generally available free programs used unmodified performing activities part work. example, Corresponding Source includes interface definition files associated source files work, source code shared libraries dynamically linked subprograms work specifically designed require, intimate data communication control flow subprograms parts work. Corresponding Source need include anything users can regenerate automatically parts Corresponding Source. Corresponding Source work source code form work.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_2-basic-permissions","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"2. Basic Permissions","title":"GNU General Public License","text":"rights granted License granted term copyright Program, irrevocable provided stated conditions met. License explicitly affirms unlimited permission run unmodified Program. output running covered work covered License output, given content, constitutes covered work. License acknowledges rights fair use equivalent, provided copyright law. may make, run propagate covered works convey, without conditions long license otherwise remains force. may convey covered works others sole purpose make modifications exclusively , provide facilities running works, provided comply terms License conveying material control copyright. thus making running covered works must exclusively behalf, direction control, terms prohibit making copies copyrighted material outside relationship . Conveying circumstances permitted solely conditions stated . Sublicensing allowed; section 10 makes unnecessary.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_3-protecting-users-legal-rights-from-anti-circumvention-law","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"3. Protecting Users’ Legal Rights From Anti-Circumvention Law","title":"GNU General Public License","text":"covered work shall deemed part effective technological measure applicable law fulfilling obligations article 11 WIPO copyright treaty adopted 20 December 1996, similar laws prohibiting restricting circumvention measures. convey covered work, waive legal power forbid circumvention technological measures extent circumvention effected exercising rights License respect covered work, disclaim intention limit operation modification work means enforcing, work’s users, third parties’ legal rights forbid circumvention technological measures.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_4-conveying-verbatim-copies","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"4. Conveying Verbatim Copies","title":"GNU General Public License","text":"may convey verbatim copies Program’s source code receive , medium, provided conspicuously appropriately publish copy appropriate copyright notice; keep intact notices stating License non-permissive terms added accord section 7 apply code; keep intact notices absence warranty; give recipients copy License along Program. may charge price price copy convey, may offer support warranty protection fee.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_5-conveying-modified-source-versions","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"5. Conveying Modified Source Versions","title":"GNU General Public License","text":"may convey work based Program, modifications produce Program, form source code terms section 4, provided also meet conditions: ) work must carry prominent notices stating modified , giving relevant date. b) work must carry prominent notices stating released License conditions added section 7. requirement modifies requirement section 4 “keep intact notices”. c) must license entire work, whole, License anyone comes possession copy. License therefore apply, along applicable section 7 additional terms, whole work, parts, regardless packaged. License gives permission license work way, invalidate permission separately received . d) work interactive user interfaces, must display Appropriate Legal Notices; however, Program interactive interfaces display Appropriate Legal Notices, work need make . compilation covered work separate independent works, nature extensions covered work, combined form larger program, volume storage distribution medium, called “aggregate” compilation resulting copyright used limit access legal rights compilation’s users beyond individual works permit. Inclusion covered work aggregate cause License apply parts aggregate.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_6-conveying-non-source-forms","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"6. Conveying Non-Source Forms","title":"GNU General Public License","text":"may convey covered work object code form terms sections 4 5, provided also convey machine-readable Corresponding Source terms License, one ways: ) Convey object code , embodied , physical product (including physical distribution medium), accompanied Corresponding Source fixed durable physical medium customarily used software interchange. b) Convey object code , embodied , physical product (including physical distribution medium), accompanied written offer, valid least three years valid long offer spare parts customer support product model, give anyone possesses object code either (1) copy Corresponding Source software product covered License, durable physical medium customarily used software interchange, price reasonable cost physically performing conveying source, (2) access copy Corresponding Source network server charge. c) Convey individual copies object code copy written offer provide Corresponding Source. alternative allowed occasionally noncommercially, received object code offer, accord subsection 6b. d) Convey object code offering access designated place (gratis charge), offer equivalent access Corresponding Source way place charge. need require recipients copy Corresponding Source along object code. place copy object code network server, Corresponding Source may different server (operated third party) supports equivalent copying facilities, provided maintain clear directions next object code saying find Corresponding Source. Regardless server hosts Corresponding Source, remain obligated ensure available long needed satisfy requirements. e) Convey object code using peer--peer transmission, provided inform peers object code Corresponding Source work offered general public charge subsection 6d. separable portion object code, whose source code excluded Corresponding Source System Library, need included conveying object code work. “User Product” either (1) “consumer product”, means tangible personal property normally used personal, family, household purposes, (2) anything designed sold incorporation dwelling. determining whether product consumer product, doubtful cases shall resolved favor coverage. particular product received particular user, “normally used” refers typical common use class product, regardless status particular user way particular user actually uses, expects expected use, product. product consumer product regardless whether product substantial commercial, industrial non-consumer uses, unless uses represent significant mode use product. “Installation Information” User Product means methods, procedures, authorization keys, information required install execute modified versions covered work User Product modified version Corresponding Source. information must suffice ensure continued functioning modified object code case prevented interfered solely modification made. convey object code work section , , specifically use , User Product, conveying occurs part transaction right possession use User Product transferred recipient perpetuity fixed term (regardless transaction characterized), Corresponding Source conveyed section must accompanied Installation Information. requirement apply neither third party retains ability install modified object code User Product (example, work installed ROM). requirement provide Installation Information include requirement continue provide support service, warranty, updates work modified installed recipient, User Product modified installed. Access network may denied modification materially adversely affects operation network violates rules protocols communication across network. Corresponding Source conveyed, Installation Information provided, accord section must format publicly documented (implementation available public source code form), must require special password key unpacking, reading copying.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_7-additional-terms","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"7. Additional Terms","title":"GNU General Public License","text":"“Additional permissions” terms supplement terms License making exceptions one conditions. Additional permissions applicable entire Program shall treated though included License, extent valid applicable law. additional permissions apply part Program, part may used separately permissions, entire Program remains governed License without regard additional permissions. convey copy covered work, may option remove additional permissions copy, part . (Additional permissions may written require removal certain cases modify work.) may place additional permissions material, added covered work, can give appropriate copyright permission. Notwithstanding provision License, material add covered work, may (authorized copyright holders material) supplement terms License terms: ) Disclaiming warranty limiting liability differently terms sections 15 16 License; b) Requiring preservation specified reasonable legal notices author attributions material Appropriate Legal Notices displayed works containing ; c) Prohibiting misrepresentation origin material, requiring modified versions material marked reasonable ways different original version; d) Limiting use publicity purposes names licensors authors material; e) Declining grant rights trademark law use trade names, trademarks, service marks; f) Requiring indemnification licensors authors material anyone conveys material (modified versions ) contractual assumptions liability recipient, liability contractual assumptions directly impose licensors authors. non-permissive additional terms considered “restrictions” within meaning section 10. Program received , part , contains notice stating governed License along term restriction, may remove term. license document contains restriction permits relicensing conveying License, may add covered work material governed terms license document, provided restriction survive relicensing conveying. add terms covered work accord section, must place, relevant source files, statement additional terms apply files, notice indicating find applicable terms. Additional terms, permissive non-permissive, may stated form separately written license, stated exceptions; requirements apply either way.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_8-termination","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"8. Termination","title":"GNU General Public License","text":"may propagate modify covered work except expressly provided License. attempt otherwise propagate modify void, automatically terminate rights License (including patent licenses granted third paragraph section 11). However, cease violation License, license particular copyright holder reinstated () provisionally, unless copyright holder explicitly finally terminates license, (b) permanently, copyright holder fails notify violation reasonable means prior 60 days cessation. Moreover, license particular copyright holder reinstated permanently copyright holder notifies violation reasonable means, first time received notice violation License (work) copyright holder, cure violation prior 30 days receipt notice. Termination rights section terminate licenses parties received copies rights License. rights terminated permanently reinstated, qualify receive new licenses material section 10.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_9-acceptance-not-required-for-having-copies","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"9. Acceptance Not Required for Having Copies","title":"GNU General Public License","text":"required accept License order receive run copy Program. Ancillary propagation covered work occurring solely consequence using peer--peer transmission receive copy likewise require acceptance. However, nothing License grants permission propagate modify covered work. actions infringe copyright accept License. Therefore, modifying propagating covered work, indicate acceptance License .","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_10-automatic-licensing-of-downstream-recipients","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"10. Automatic Licensing of Downstream Recipients","title":"GNU General Public License","text":"time convey covered work, recipient automatically receives license original licensors, run, modify propagate work, subject License. responsible enforcing compliance third parties License. “entity transaction” transaction transferring control organization, substantially assets one, subdividing organization, merging organizations. propagation covered work results entity transaction, party transaction receives copy work also receives whatever licenses work party’s predecessor interest give previous paragraph, plus right possession Corresponding Source work predecessor interest, predecessor can get reasonable efforts. may impose restrictions exercise rights granted affirmed License. example, may impose license fee, royalty, charge exercise rights granted License, may initiate litigation (including cross-claim counterclaim lawsuit) alleging patent claim infringed making, using, selling, offering sale, importing Program portion .","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_11-patents","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"11. Patents","title":"GNU General Public License","text":"“contributor” copyright holder authorizes use License Program work Program based. work thus licensed called contributor’s “contributor version”. contributor’s “essential patent claims” patent claims owned controlled contributor, whether already acquired hereafter acquired, infringed manner, permitted License, making, using, selling contributor version, include claims infringed consequence modification contributor version. purposes definition, “control” includes right grant patent sublicenses manner consistent requirements License. contributor grants non-exclusive, worldwide, royalty-free patent license contributor’s essential patent claims, make, use, sell, offer sale, import otherwise run, modify propagate contents contributor version. following three paragraphs, “patent license” express agreement commitment, however denominated, enforce patent (express permission practice patent covenant sue patent infringement). “grant” patent license party means make agreement commitment enforce patent party. convey covered work, knowingly relying patent license, Corresponding Source work available anyone copy, free charge terms License, publicly available network server readily accessible means, must either (1) cause Corresponding Source available, (2) arrange deprive benefit patent license particular work, (3) arrange, manner consistent requirements License, extend patent license downstream recipients. “Knowingly relying” means actual knowledge , patent license, conveying covered work country, recipient’s use covered work country, infringe one identifiable patents country reason believe valid. , pursuant connection single transaction arrangement, convey, propagate procuring conveyance , covered work, grant patent license parties receiving covered work authorizing use, propagate, modify convey specific copy covered work, patent license grant automatically extended recipients covered work works based . patent license “discriminatory” include within scope coverage, prohibits exercise , conditioned non-exercise one rights specifically granted License. may convey covered work party arrangement third party business distributing software, make payment third party based extent activity conveying work, third party grants, parties receive covered work , discriminatory patent license () connection copies covered work conveyed (copies made copies), (b) primarily connection specific products compilations contain covered work, unless entered arrangement, patent license granted, prior 28 March 2007. Nothing License shall construed excluding limiting implied license defenses infringement may otherwise available applicable patent law.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_12-no-surrender-of-others-freedom","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"12. No Surrender of Others’ Freedom","title":"GNU General Public License","text":"conditions imposed (whether court order, agreement otherwise) contradict conditions License, excuse conditions License. convey covered work satisfy simultaneously obligations License pertinent obligations, consequence may convey . example, agree terms obligate collect royalty conveying convey Program, way satisfy terms License refrain entirely conveying Program.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_13-use-with-the-gnu-affero-general-public-license","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"13. Use with the GNU Affero General Public License","title":"GNU General Public License","text":"Notwithstanding provision License, permission link combine covered work work licensed version 3 GNU Affero General Public License single combined work, convey resulting work. terms License continue apply part covered work, special requirements GNU Affero General Public License, section 13, concerning interaction network apply combination .","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_14-revised-versions-of-this-license","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"14. Revised Versions of this License","title":"GNU General Public License","text":"Free Software Foundation may publish revised /new versions GNU General Public License time time. new versions similar spirit present version, may differ detail address new problems concerns. version given distinguishing version number. Program specifies certain numbered version GNU General Public License “later version” applies , option following terms conditions either numbered version later version published Free Software Foundation. Program specify version number GNU General Public License, may choose version ever published Free Software Foundation. Program specifies proxy can decide future versions GNU General Public License can used, proxy’s public statement acceptance version permanently authorizes choose version Program. Later license versions may give additional different permissions. However, additional obligations imposed author copyright holder result choosing follow later version.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_15-disclaimer-of-warranty","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"15. Disclaimer of Warranty","title":"GNU General Public License","text":"WARRANTY PROGRAM, EXTENT PERMITTED APPLICABLE LAW. EXCEPT OTHERWISE STATED WRITING COPYRIGHT HOLDERS /PARTIES PROVIDE PROGRAM “” WITHOUT WARRANTY KIND, EITHER EXPRESSED IMPLIED, INCLUDING, LIMITED , IMPLIED WARRANTIES MERCHANTABILITY FITNESS PARTICULAR PURPOSE. ENTIRE RISK QUALITY PERFORMANCE PROGRAM . PROGRAM PROVE DEFECTIVE, ASSUME COST NECESSARY SERVICING, REPAIR CORRECTION.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_16-limitation-of-liability","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"16. Limitation of Liability","title":"GNU General Public License","text":"EVENT UNLESS REQUIRED APPLICABLE LAW AGREED WRITING COPYRIGHT HOLDER, PARTY MODIFIES /CONVEYS PROGRAM PERMITTED , LIABLE DAMAGES, INCLUDING GENERAL, SPECIAL, INCIDENTAL CONSEQUENTIAL DAMAGES ARISING USE INABILITY USE PROGRAM (INCLUDING LIMITED LOSS DATA DATA RENDERED INACCURATE LOSSES SUSTAINED THIRD PARTIES FAILURE PROGRAM OPERATE PROGRAMS), EVEN HOLDER PARTY ADVISED POSSIBILITY DAMAGES.","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"id_17-interpretation-of-sections-15-and-16","dir":"","previous_headings":"TERMS AND CONDITIONS","what":"17. Interpretation of Sections 15 and 16","title":"GNU General Public License","text":"disclaimer warranty limitation liability provided given local legal effect according terms, reviewing courts shall apply local law closely approximates absolute waiver civil liability connection Program, unless warranty assumption liability accompanies copy Program return fee. END TERMS CONDITIONS","code":""},{"path":"https://obrien-ben.github.io/transittraj/LICENSE.html","id":"how-to-apply-these-terms-to-your-new-programs","dir":"","previous_headings":"","what":"How to Apply These Terms to Your New Programs","title":"GNU General Public License","text":"develop new program, want greatest possible use public, best way achieve make free software everyone can redistribute change terms. , attach following notices program. safest attach start source file effectively state exclusion warranty; file least “copyright” line pointer full notice found. Also add information contact electronic paper mail. program terminal interaction, make output short notice like starts interactive mode: hypothetical commands show w show c show appropriate parts General Public License. course, program’s commands might different; GUI interface, use “box”. also get employer (work programmer) school, , sign “copyright disclaimer” program, necessary. information , apply follow GNU GPL, see <http://www.gnu.org/licenses/>. GNU General Public License permit incorporating program proprietary programs. program subroutine library, may consider useful permit linking proprietary applications library. want , use GNU Lesser General Public License instead License. first, please read <http://www.gnu.org/philosophy/--lgpl.html>.","code":"<one line to give the program's name and a brief idea of what it does.> Copyright (C) <year>  <name of author>  This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.  You should have received a copy of the GNU General Public License along with this program.  If not, see <http://www.gnu.org/licenses/>. <program>  Copyright (C) <year>  <name of author> This program comes with ABSOLUTELY NO WARRANTY; for details type 'show w'. This is free software, and you are welcome to redistribute it under certain conditions; type 'show c' for details."},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"data-workflow","text":"vignette, walk transittraj’s entire AVL cleaning trajectory reconstruction workflow. Check vignette(\"input-data\") learn AVL GTFS data ’ll using. Let’s begin loading libraries ’ll using:","code":"library(transittraj) library(tidytransit) library(dplyr) library(sf) library(ggplot2)"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"step-0-setup","dir":"Articles","previous_headings":"","what":"Step 0: Setup","title":"data-workflow","text":"’ll begin setting data ’re working . ’ll using wmata_avl wmata_gtfs TIDES AVL static GTFS input, respectively.","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"avl","dir":"Articles","previous_headings":"Step 0: Setup","what":"AVL","title":"data-workflow","text":"example, ’ll work WMATA’s bus route C53 northbound direction. Let’s filter AVL data specifications: Now dataset include northbound C53 trips. can see window 5,400 individual GPS pings across 33 trips 5 hours.","code":"c53 <- \"C53\" c53_dir <- 0 # 0 is NB, 1 is SB  c53_avl <- wmata_avl %>%   filter((route_id == c53) & (direction_id == c53_dir)) total_obs <- dim(c53_avl)[1] num_trips <- length(unique(c53_avl$trip_id_performed)) time_span <- round(max(c53_avl$event_timestamp) - min(c53_avl$event_timestamp),                    2) cat(\"Total Observations: \", total_obs,     \"\\nNumber of trips: \", num_trips,     \"\\nTime span: \", time_span, \" hr\",     sep = \"\") #> Total Observations: 5436 #> Number of trips: 33 #> Time span: 5.02 hr"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"gtfs","dir":"Articles","previous_headings":"Step 0: Setup","what":"GTFS","title":"data-workflow","text":"Next, grab GTFS shape feed information want route direction. transittraj provides two functions help : print summary GTFS object, ’ll see one route: Now filtered GTFS, must pull shape want simple features (SF) spatial object. need know two things : shape_id. shown , two shape_ids assigned northbound C53. Check plot_interactive_gtfs() explore shape individually decide one correct . use shape_id = \"C53:04\". coordinate reference system. recommend projecting spatial data appropriate Euclidian coordinate system. use UTM zone Washington, DC, Zone 18N (EPSG number 32618). use get_shape_geometry() grab shape_id want, turn linestring, project appropriate coordinate system: Now, print object, ’ll see one multilinestring shape_id = \"C53:04\" coordinate system UTM 18N.","code":"c53_gtfs <- filter_by_route(gtfs = wmata_gtfs,                             route_ids = c53,                             dir_id = c53_dir) summary(c53_gtfs) #> tidygtfs object #> files        agency, routes, stop_times, trips, shapes, calendar, calendar_dates, stops #> agency       WMATA #> service      from 2025-12-14 to 2026-06-13 #> uses         stop_times (no frequencies) #> # routes       1 #> # trips      952 #> # stop_ids    57 #> # stop_names  57 #> # shapes       2 c53_NB_shape_id <- \"C53:04\" dc_CRS <- 32618 c53_shape <- get_shape_geometry(gtfs = c53_gtfs,                                 shape = c53_NB_shape_id,                                 project_crs = dc_CRS) print(c53_shape) #> Simple feature collection with 1 feature and 1 field #> Geometry type: MULTILINESTRING #> Dimension:     XY #> Bounding box:  xmin: 322061.8 ymin: 4301418 xmax: 329233.3 ymax: 4310353 #> Projected CRS: WGS 84 / UTM zone 18N #> # A tibble: 1 × 2 #>   shape_id                                                              geometry #>   <chr>                                                    <MULTILINESTRING [m]> #> 1 C53:04   ((327507.1 4301484, 327505.6 4301478, 327504.9 4301473, 327504 43014…"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"visualizing-our-starting-data","dir":"Articles","previous_headings":"Step 0: Setup","what":"Visualizing our Starting Data","title":"data-workflow","text":"now data need proceed. , let’s visualize AVL point route geometry understand ’re working :  part, GPS pings follow route alignment excellently. ’s deal points -route far south? pings roughly follow -295 Blue Plains neighborhood. end roughly location WMATA’s Shepherd Parkway bus garage. C53 dispatched Shepherd, vehicles take -295 get Shepherd starting/ending locations. Knowing , points likely correspond one () deadheading vehicles logged trip actually started run. pretty common phenomenon across AVL vendors. demonstrates always 1) visualize data, 2) know system ’re working . transittraj includes functions intended identify remove potential deadheads. ’ll begin exploring following section.","code":"# Convert GPS points to spatial objects c53_sf <- c53_avl %>%   # As SF   st_as_sf(coords = c(\"longitude\", \"latitude\"),            crs = 4326) %>%   # Project to DC   st_transform(crs = dc_CRS)  # Generate a map avl_map <- ggplot() +   # Basemap from OSM   ggspatial::annotation_map_tile(type = \"cartolight\", zoomin = 0,                                  progress = \"none\") +   # Add alignment & points   geom_sf(data = c53_shape, color = \"red\", linewidth = 1.5) +   geom_sf(data= c53_sf, color = \"blue\",           alpha = 0.2, size = .7) +   # Format our map   theme_void() +   labs(title = \"C53 Shape & AVL\") +   theme(plot.title = element_text(size = 8)) avl_map"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"steps-1-2-buffer-linearize","dir":"Articles","previous_headings":"","what":"Steps 1 & 2: Buffer & Linearize","title":"data-workflow","text":"Now data, can begin cleaning processesing . first two steps recommend : Step 1: Buffer. Clip GPS points within certain distance route alignment. Step 2: Linearize. Project GPS points onto route alignment retrieve linear distance start route. steps bundled one function, get_linear_distances(). two main decision variables function: projection CRS. one used create route shape. buffer distance. units spatial projection. ’re using UTM, meters. Thus, distance measurements see vignette meters.","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"running-the-code","dir":"Articles","previous_headings":"Steps 1 & 2: Buffer & Linearize","what":"Running the Code","title":"data-workflow","text":"","code":"c53_buffer = 50 # meters c53_distances <- get_linear_distances(avl_df = c53_avl,                                       shape_geometry = c53_shape,                                       project_crs = dc_CRS,                                       clip_buffer = c53_buffer)"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"exploring-the-results","dir":"Articles","previous_headings":"Steps 1 & 2: Buffer & Linearize","what":"Exploring the Results","title":"data-workflow","text":"Now observation represented distance route’s beginning. Let’s first see many observations clipped : just 500 observations clipped dataset. can also take look new header dataset: Now, instead latitude longitude columns, single numeric distance column.","code":"step0_obs <- dim(c53_avl)[1] step1_obs <- dim(c53_distances)[1]  cat(\"Initial: \", step0_obs, \" obs\",     \"\\nAfter buffer: \", step1_obs, \" obs\",     \"\\nDifference: \", (step0_obs - step1_obs), \" obs removed\") #> Initial:  5436  obs  #> After buffer:  4946  obs  #> Difference:  490  obs removed head(c53_distances) #>   location_ping_id vehicle_id trip_id_performed service_date route_id #> 1                1       5461          18632100   2026-02-16      C53 #> 2                3       5464          14078100   2026-02-16      C53 #> 3                4       5466          25836100   2026-02-16      C53 #> 4                6       5473           8428100   2026-02-16      C53 #> 6                8       5481           1115100   2026-02-16      C53 #> 7                9       5479            842100   2026-02-16      C53 #>   direction_id   speed trip_stop_sequence     event_timestamp stop_id #> 1            0  0.0000                 63 2026-02-16 10:58:09    7219 #> 2            0 10.9728                 52 2026-02-16 10:58:31    6843 #> 3            0  0.0000                  2 2026-02-16 10:58:27   13111 #> 4            0  4.5720                 63 2026-02-16 10:58:02    7219 #> 6            0  7.9248                 41 2026-02-16 10:58:10   28286 #> 7            0  8.8392                 29 2026-02-16 10:58:24    4520 #>       distance #> 1 1.534625e+04 #> 2 1.205652e+04 #> 3 4.191312e-02 #> 4 1.535750e+04 #> 6 9.512327e+03 #> 7 6.551790e+03"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"step-3-cleaning-overlapping-subtrips","dir":"Articles","previous_headings":"","what":"Step 3: Cleaning Overlapping Subtrips","title":"data-workflow","text":"AVL vendors, multiple vehicles (operators) can multiple vehicle operator IDs recorded trip. Sometimes okay: example, may operator shift change mid-shift. times, however, multiple vehicles/operators logged time (“overlapping”). creates problems, becomes impossible transittraj understand trip supposed . function clean_overlapping_subtrips() identifies removes trips. key decision variables: operator IDs checked? WMATA dataset include operator information, check . subtrip one observation assigned (.e., one observation unique combination trip, vehicle, operator), removed? trips multiple subtrips overlap removed? dataset, ’s okay leave .","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"running-the-code-1","dir":"Articles","previous_headings":"Step 3: Cleaning Overlapping Subtrips","what":"Running the Code","title":"data-workflow","text":"","code":"c53_cleaned_subtrips <- clean_overlapping_subtrips(   distance_df = c53_distances,   check_operator = FALSE,   remove_single_observations = TRUE,   remove_non_overlapping = FALSE )"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"exploring-the-results-1","dir":"Articles","previous_headings":"Step 3: Cleaning Overlapping Subtrips","what":"Exploring the Results","title":"data-workflow","text":"can see one observation violated requirements. see observation , ’ll introduce new feature transittraj: return_removals parameter. cleaning function used vignette contains parameter return_removals , set TRUE, return dataframe point(s) removed step brief explanation removed. Let’s check : can see trip subtrip (trip_id-vehicle_id) removed, removed single observation. Let’s see trip looked like original dataset: trip, fact, one observation total. makes sense remove – can’t much single observation.","code":"step3_obs <- dim(c53_cleaned_subtrips)[1]  cat(\"Initial: \", step1_obs, \" obs\",     \"\\nAfter: \", step3_obs, \" obs\",     \"\\nDifference: \", (step1_obs - step3_obs), \" obs removed\") #> Initial:  4946  obs  #> After:  4945  obs  #> Difference:  1  obs removed c53_step3_removals <- clean_overlapping_subtrips(   # Same settigns as before   distance_df = c53_distances, check_operator = FALSE,   remove_single_observations = TRUE, remove_non_overlapping = FALSE,   # Return removals   return_removals = TRUE )  print(c53_step3_removals) #> # A tibble: 1 × 7 #>   trip_id_performed subtrip   n_obs reason action time_range n_subtrips_in_range #>   <chr>             <chr>     <int> <chr>  <chr>   <iv<dbl>>               <int> #> 1 8428100           8428100-…     1 singl… remov…   [NA, NA)                  NA print(c53_distances %>%         filter(trip_id_performed == \"8428100\")) #>   location_ping_id vehicle_id trip_id_performed service_date route_id #> 1                6       5473           8428100   2026-02-16      C53 #>   direction_id speed trip_stop_sequence     event_timestamp stop_id distance #> 1            0 4.572                 63 2026-02-16 10:58:02    7219  15357.5"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"step-4-clean-outlierjumps","dir":"Articles","previous_headings":"","what":"Step 4: Clean Outlier/Jumps","title":"data-workflow","text":"GPS data, especially urban areas, noisy. Sometimes noise manifests large instantaneous jump match observation’s surroundings. function clean_jumps() detects removes using median filters. Read theory behind filters using help(clean_jumps). example, ’ll simple median filter using deviation median around point. two main decision variables: neighborhood width, total number points consider around observation. ’ll use default, 7, . means window consist 3 points either side observation. maximum jump distance. ’ll use maximum 20 meters . quite conservative; goal simply demonstrate idea. Note demonstration purposes, ’re using simple median filter methodology. options robust options, Hampel filter, available clean_jumps().","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"running-the-code-2","dir":"Articles","previous_headings":"Step 4: Clean Outlier/Jumps","what":"Running the Code","title":"data-workflow","text":"Let’s run clean_jumps() discussed . input need change default maximum distance deviation.","code":"c53_max_jump <- 20 # meters c53_min_jump <- -1 * c53_max_jump # meters c53_no_jumps <- clean_jumps(distance_df = c53_cleaned_subtrips,                             max_median_deviation = c53_max_jump,                             min_median_deviation = c53_min_jump,                             t_cutoff = Inf)"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"exploring-the-results-2","dir":"Articles","previous_headings":"Step 4: Clean Outlier/Jumps","what":"Exploring the Results","title":"data-workflow","text":"Let’s see many points removed outliers filter: can use return_removals = TRUE, just like Step 3, see observations removed: Let’s explore pings 16770 16798 trip 1306100 example. can plot trip area visualize outliers:  plot makes pretty clear points bit line. final one removed may truly outlier; recommend playing around function’s options find settings make sense data. , lot customization options types median filters available function. Read help(clean_jumps).","code":"step4_obs <- dim(c53_no_jumps)[1]  cat(\"Initial: \", step3_obs, \" obs\",     \"\\nAfter: \", step4_obs, \" obs\",     \"\\nDifference: \", (step3_obs - step4_obs), \" obs removed\") #> Initial:  4945  obs  #> After:  4934  obs  #> Difference:  11  obs removed c53_step4_removals <- clean_jumps(   # Same settings as before   distance_df = c53_cleaned_subtrips,   neighborhood_width = 7,   max_median_deviation = c53_max_jump, min_median_deviation = c53_min_jump,   evaluate_implosions = FALSE, evaluate_tails = FALSE,   t_cutoff = Inf,   # Return removals   return_removals = TRUE) print(c53_step4_removals) #> # A tibble: 11 × 13 #>    trip_id_performed event_timestamp       distance location_ping_id window_med #>    <chr>             <dttm>                   <dbl> <chr>                 <dbl> #>  1 1306100           2026-02-16 12:43:47  4954.     16770                4884.  #>  2 1306100           2026-02-16 12:43:57  4954.     16798                4896.  #>  3 1306100           2026-02-16 12:44:05  4844.     16826                4936.  #>  4 1306100           2026-02-16 12:44:35  4896.     16910                4954.  #>  5 1306100           2026-02-16 13:31:22 13819.     24579               13789.  #>  6 13478100          2026-02-16 15:37:40   108.     45428                  66.7 #>  7 35294100          2026-02-16 11:28:14    83.2    4721                   20.1 #>  8 35294100          2026-02-16 11:32:14     0.0419 5369                   20.1 #>  9 35294100          2026-02-16 11:37:49     0.0419 6260                   20.1 #> 10 35294100          2026-02-16 11:39:13   257.     6476                   83.2 #> 11 35294100          2026-02-16 11:40:34    11.2    6692                  214.  #> # ℹ 8 more variables: window_mad <dbl>, med_dist <dbl>, is_implosion <lgl>, #> #   is_tail <lgl>, ignore_observation <lgl>, mad_ok <lgl>, dev_ok <lgl>, #> #   all_ok <lgl> # Filter dataframe to our tirp & distances plot_df <- c53_cleaned_subtrips %>%   filter(trip_id_performed == \"1306100\") %>%   filter((distance >= 4500) & (distance <= 5500)) %>%   # Join removals   left_join(y = (c53_step4_removals %>% select(location_ping_id, all_ok)),             by = \"location_ping_id\") %>%   mutate(all_ok = tidyr::replace_na(all_ok, TRUE))  # Create a plot jumps_plot <- ggplot() +   # Plot the points   geom_point(data = plot_df,              aes(x = event_timestamp, y = distance,                  color = all_ok, shape = all_ok),              size = 1, stroke = 1) +   # Format the points   scale_color_manual(name = \"Point OK?\",                      values = c(\"FALSE\" = \"firebrick\",                                 \"TRUE\" = \"darkgreen\")) +   scale_shape_manual(name = \"Point OK?\",                      values = c(\"FALSE\" = 4,                                 \"TRUE\" = 16)) +   # Format the plot   theme_minimal() +   labs(x = \"Time\",        y = \"Distance (m)\",        title = \"Outliers on C53\",        subtitle = \"Trip 13478100\") +   theme(text = element_text(size = 5)) jumps_plot"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"step-5-clean-incomplete-trips","dir":"Articles","previous_headings":"","what":"Step 5: Clean Incomplete Trips","title":"data-workflow","text":"AVL GTFS-rt data rarely transmitted perfectly. Often, may large gaps missing data middle trips, may observations trip. clean_incomplete_trips() designed filter scenarios. two main groups decision variables function: Minimum maximum trip distances durations. Minimum maximum gaps adjacent observations. function remove entirety trips violate decision variables.","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"running-the-code-3","dir":"Articles","previous_headings":"Step 5: Clean Incomplete Trips","what":"Running the Code","title":"data-workflow","text":"example, ’ll use minimum trip distance 500 meters, minimum trip duration 90 seconds. Anything less data filtered . Additionally, ’ll remove trips gap larger 500 meters.","code":"c53_min_dist <- 500 # meters c53_min_time <- 90 # seconds c53_max_gap <- 500 # meters  c53_cleaned_incompletes <- clean_incomplete_trips(   distance_df = c53_no_jumps,   min_trip_distance = c53_min_dist,   min_trip_duration = c53_min_time,   max_distance_gap = c53_max_gap )"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"exploring-the-results-3","dir":"Articles","previous_headings":"Step 5: Clean Incomplete Trips","what":"Exploring the Results","title":"data-workflow","text":"Now ’ve filtered dataset, let’s see many trips removed: 7 trips violated requirements, corresponding roughly 850 individual observations. , can use return_removals take look violating trips: removed large gap data. Let’s take look one, trip 21956100:  can see trip’s large gap around 12,500 meters. slope line bit steep, unreasonable; seems GTFS-rt pings just went missing somehow. go reconstruct trajectory curve later, may reasonable interpolate points large gap, ’ll leave trip future analyses.","code":"step5_obs <- dim(c53_cleaned_incompletes)[1] step5_trips <- length(unique(c53_cleaned_incompletes$trip_id_performed)) step4_trips <- length(unique(c53_no_jumps$trip_id_performed))  cat(\"Initial: \", step4_obs, \" obs, \", step4_trips, \" trips\",     \"\\nAfter: \", step5_obs, \" obs, \", step5_trips, \" trips\",     \"\\nDifference: \", (step4_obs - step5_obs), \" obs, \",     (step4_trips - step5_trips), \" trips removed\",     sep = \"\") #> Initial: 4934 obs, 31 trips #> After: 4089 obs, 24 trips #> Difference: 845 obs, 7 trips removed c53_step5_removals <- clean_incomplete_trips(   # Same settings as before   distance_df = c53_no_jumps,   min_trip_distance = c53_min_dist, min_trip_duration = c53_min_time,   max_distance_gap = c53_max_gap,   # Return removals   return_removals = TRUE ) print(c53_step5_removals) #> # A tibble: 7 × 16 #>   trip_id_performed max_dist   min_dist max_time            min_time            #>   <chr>                <dbl>      <dbl> <dttm>              <dttm>              #> 1 13927100              127.     0      2026-02-16 14:36:57 2026-02-16 14:36:27 #> 2 14639100            15362.     0      2026-02-16 12:38:36 2026-02-16 11:38:49 #> 3 18632100            15360. 15346.     2026-02-16 11:02:20 2026-02-16 10:58:09 #> 4 21956100            13803.   248.     2026-02-16 15:59:17 2026-02-16 14:45:27 #> 5 5516100             15259.     0.0419 2026-02-16 15:12:19 2026-02-16 13:52:44 #> 6 6533100             12118.     0.0419 2026-02-16 15:59:17 2026-02-16 14:52:21 #> 7 7879100             15363.     0.0419 2026-02-16 14:41:08 2026-02-16 13:26:33 #> # ℹ 11 more variables: max_dist_gap <dbl>, max_t_gap <dbl>, #> #   max_dist_gap_id <chr>, max_t_gap_id <chr>, trip_distance <dbl>, #> #   duration <dbl>, dist_ok <lgl>, dur_ok <lgl>, dist_gap_ok <lgl>, #> #   t_gap_ok <lgl>, all_ok <lgl> # Filter dataframe to our tirp & distances plot_df <- c53_cleaned_subtrips %>%   filter(trip_id_performed == \"21956100\") %>%   filter((distance >= 11000) & (distance <= 14000))  # Create a plot gaps_plot <- ggplot() +   # Plot the points   geom_line(data = plot_df,             aes(x = event_timestamp, y = distance),             linewidth = 0.8, color = \"indianred\") +   geom_point(data = plot_df,              aes(x = event_timestamp, y = distance),              size = 0.8, color = \"firebrick\") +   # Format the plot   theme_minimal() +   labs(x = \"Time\",        y = \"Distance (m)\",        title = \"Gap on C53\",        subtitle = \"Trip 21956100\") +   theme(text = element_text(size = 5)) gaps_plot"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"step-6-trim-trip-tails","dir":"Articles","previous_headings":"","what":"Step 6: Trim Trip Tails","title":"data-workflow","text":"Earlier vignette, used spatial buffer clean appeared deadheads. trip deadheads close – along – route alignment? function trim_trips() designed handle scenarios trimming tails trips. function identifies observations minimum maximum distance values, removes observations occur /points. one main decision variable : beginning trail trimmed, ending tails, ?","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"running-the-code-4","dir":"Articles","previous_headings":"Step 6: Trim Trip Tails","what":"Running the Code","title":"data-workflow","text":"example, ’ll trim ends trips:","code":"c53_trimmed <- trim_trips(distance_df = c53_cleaned_incompletes,                           trim_type = \"both\")"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"exploring-the-results-4","dir":"Articles","previous_headings":"Step 6: Trim Trip Tails","what":"Exploring the Results","title":"data-workflow","text":"Let’s see removed: dataset, looks like long deadheads along route alignment. Whether function make difference largely depend dataset routes ’re working . Let’s take look points removed: Plotting points removed along trip 35294100:  noted , seem long deadhead; just noise beginning route (default, clean_jumps() look jumps beginning/end trips complete median window can formed). Whether step truly necessary depend dataset.","code":"step6_obs <- dim(c53_trimmed)[1]  cat(\"Initial: \", step5_obs, \" obs\",     \"\\nAfter: \", step6_obs, \" obs\",     \"\\nDifference: \", (step5_obs - step6_obs), \" obs removed\") #> Initial:  4089  obs  #> After:  4086  obs  #> Difference:  3  obs removed c53_step6_removals <- trim_trips(   # Same settings as before   distance_df = c53_cleaned_incompletes, trim_type = \"both\",   # Return removals   return_removals = TRUE )  print(c53_step6_removals) #> # A tibble: 3 × 10 #>   trip_id_performed event_timestamp     distance min_dist_index max_dist_index #>   <chr>             <dttm>                 <dbl>          <int>          <int> #> 1 13478100          2026-02-16 15:59:11   2447.               1             88 #> 2 35294100          2026-02-16 11:26:04     18.8              3            202 #> 3 35294100          2026-02-16 11:26:34     94.3              3            202 #> # ℹ 5 more variables: row_index <int>, before_min <lgl>, after_max <lgl>, #> #   obs_ok <lgl>, location_ping_id <chr> # Filter dataframe to our tirp & distances plot_df <- c53_cleaned_incompletes %>%   filter(trip_id_performed == \"35294100\") %>%   filter(distance <= 200) %>%   # Join removals   left_join(y = (c53_step6_removals %>% select(location_ping_id, obs_ok)),             by = \"location_ping_id\") %>%   mutate(obs_ok = tidyr::replace_na(obs_ok, TRUE))  # Create a plot trimmed_plot <- ggplot() +   # Plot the points   geom_point(data = plot_df,              aes(x = event_timestamp, y = distance,                  color = obs_ok, shape = obs_ok),              size = 1, stroke = 1) +   # Format the points   scale_color_manual(name = \"Point OK?\",                      values = c(\"FALSE\" = \"firebrick\",                                 \"TRUE\" = \"darkgreen\")) +   scale_shape_manual(name = \"Point OK?\",                      values = c(\"FALSE\" = 4,                                 \"TRUE\" = 16)) +   # Format the plot   theme_minimal() +   labs(x = \"Time\",        y = \"Distance (m)\",        title = \"Trimmed Trips on C53\",        subtitle = \"Trip 35294100\") +   theme(text = element_text(size = 5)) trimmed_plot"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"step-7-correct-for-monotonicity","dir":"Articles","previous_headings":"","what":"Step 7: Correct for Monotonicity","title":"data-workflow","text":"GPS noise can result large jumps saw previously, much often causes small deviations observed locations. creates problems fitting interpolating trajectory curve, points drift backwards, curve neither monotonic invertible. seventh (final!) cleaning step “pull” backtracking points back upwards. Optionally, data can also made strictly monotonic. function make_monotonic() two decision variables: speeds corrected satisfy monotonicity? AVL speed location can help fit excellent interpolating curve, values observed speeds must meet certain coditions (known Fritsch-Carlson constraints) produce monotonic spline. AVL data speeds information, plan use fitting spline (recommend interpolation method), set correct_speed = TRUE guarantee fit monotonic. trajectory made strictly monotonic? identify perfectly flat regions can give slight upward slope. invertible, trajectory must strictly increasing, never constant. information available help(make_monotonic).","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"running-the-code-5","dir":"Articles","previous_headings":"Step 7: Correct for Monotonicity","what":"Running the Code","title":"data-workflow","text":"AVL dataset speeds, want invertible monotonic final trajectory. , ’ll correct speeds meet Fritsch-Carlson constraints, add distance error 0.001 meters (1 mm).","code":"c53_dist_error = 0.001 c53_mono <- make_monotonic(distance_df = c53_trimmed,                            correct_speed = TRUE,                            add_distance_error = c53_dist_error)"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"exploring-the-results-5","dir":"Articles","previous_headings":"Step 7: Correct for Monotonicity","what":"Exploring the Results","title":"data-workflow","text":"function modifies existing data, remove points. total number observations stay : can check, though, dataset now monotonic using validate_monotonicity(). ’ll ask function validate speeds well: can see trimmed dataset satisfy weak, strict, Fristch-Carlson speed conditions monotonicity, corrected dataset . Let’s visualize corrections affected data plotting example trip:  trip, GPS pings backtrack slightly bus supposed stopped. speeds also larger physically feasible monotonic trajectory bus enters leaves stop. make_monotonic() identified corrected issues.","code":"step7_obs <- dim(c53_mono)[1]  cat(\"Initial: \", step6_obs, \" obs\",     \"\\nAfter: \", step7_obs, \" obs\",     \"\\nDifference: \", (step6_obs - step7_obs), \" obs removed\") #> Initial:  4086  obs  #> After:  4086  obs  #> Difference:  0  obs removed # Trimmed DF step6_val <- validate_monotonicity(distance_df = c53_trimmed,                                    check_speed = TRUE) print(step6_val) #>   weak strict  speed  #>  FALSE  FALSE  FALSE  # Monotonic-corrected DF step7_val <- validate_monotonicity(distance_df = c53_mono,                                    check_speed = TRUE) print(step7_val) #>   weak strict  speed  #>   TRUE   TRUE   TRUE # Set filter parameters #plot_trip <- \"1306100\" plot_trip <- \"21499100\" #plot_dists <- c(13500, 14000) plot_dists <- c(13700, 13950) # Get old DF plot_df_before <- c53_trimmed %>%   filter(trip_id_performed == plot_trip) %>%   filter((distance >= plot_dists[1]) & (distance <= plot_dists[2])) %>%   mutate(speed_label = paste(round(speed, 1), \"m/s\", sep = \"\")) # Get corrected DF plot_df_after <- c53_mono %>%   filter(trip_id_performed == plot_trip) %>%   filter((distance >= plot_dists[1]) & (distance <= plot_dists[2])) %>%   mutate(speed_label = paste(round(speed, 1), \" m/s\", sep = \"\"))  # Plot mono_plot <- ggplot() +   geom_point(data = plot_df_before,              aes(x = event_timestamp, y = distance,                  color = \"Uncorrected\"),              size = 2, alpha = 0.6) +   geom_point(data = plot_df_after,              aes(x = event_timestamp, y = distance,                  color = \"Corrected\"),              size = 1, alpha = 1) +   geom_label(data = plot_df_before,              aes(x = event_timestamp, y = distance,                  color = \"Uncorrected\", label = speed_label),             nudge_y = -15, size = 1, show.legend = FALSE) +   geom_label(data = plot_df_after,              aes(x = event_timestamp, y = distance,                  color = \"Corrected\", label = speed_label),             nudge_y = 15, size = 1, show.legend = FALSE) +   scale_color_manual(name = \"Correction\",                      values=  c(\"Uncorrected\" = \"indianred\",                                 \"Corrected\" = \"darkgreen\")) +   # Format the plot   theme_minimal() +   labs(x = \"Time\",        y = \"Distance (m)\",        title = \"Monotonic Correction on C53\",        subtitle = paste(\"Trip \", plot_trip, sep = \"\")) +   theme(text = element_text(size = 5)) mono_plot"},{"path":"https://obrien-ben.github.io/transittraj/articles/data-workflow.html","id":"conclusion","dir":"Articles","previous_headings":"","what":"Conclusion","title":"data-workflow","text":"lot cleaning! now dataset free outliers deadheading trips, know produce monotonic invertible trajectory function. next vignette, fit explore interpolating curves.","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/input-data.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"input-data","text":"vignette introduces datatypes used transittraj. projects, two important data sources: Automatic vehicle location (AVL) data: set GPS latitude-longitude points describing transit vehicle’s location time. package requires AVL data follow TIDES vehicle-location table schema. GTFS feed: describes routes, trips, schedules transit vehicle follows. important part shapes file, tells us route alignment expect AVL data follow. introduce discuss data sources using two public datasets included transittraj: archive WMATA’s GTFS-rt feed, wmata_avl, archive WMATA’s static GTFS feed, wmata_gtfs. begin, let’s add needed packages:","code":"library(transittraj) library(tidytransit)"},{"path":"https://obrien-ben.github.io/transittraj/articles/input-data.html","id":"automatic-vehicle-location-data","dir":"Articles","previous_headings":"","what":"Automatic Vehicle Location Data","title":"input-data","text":"transittraj designed clean process AVL data. Unfortunately, AVL data widely-adopted standardized format; vendor data analytics platform outputs different format, GTFS-rt often lacks -depth operational data need perform meaningful analyses. interest standardizing inputs package’s functions, transittraj designed take files adhering TIDES vehicle-location standard table schema. TIDES open standard intended fill gaps described , yet widely adopted agencies data providers. recommend reformatting AVL data meet TIDES vehicle-location table schema, described . Let’s see TIDES AVL data looks like. wmata_avl dataset provided transittraj reformatted GTFS-rt meet TIDES’s needs. peak: check whether input dataframe meets needs, can run validatde_tides(). check whether fields need present, whether correct data type. dataset meet two requirements: first, missing operator_id column. okay; operator_id required transittraj functions, though benefit data. Second, dataset missing distance. something ’ll calculate cleaning process. Read transittraj’s data requirements using help(validate_tides). transittraj functions check input dataset fields data types function requires running.","code":"head(wmata_avl) #>   location_ping_id vehicle_id trip_id_performed service_date route_id #> 1                0       4582          30095100   2026-02-16      D96 #> 2                1       5461          18632100   2026-02-16      C53 #> 3                2       5463            698100   2026-02-16      C53 #> 4                3       5464          14078100   2026-02-16      C53 #> 5                4       5466          25836100   2026-02-16      C53 #> 6                5       5470           8560100   2026-02-16      C53 #>   direction_id latitude longitude   speed trip_stop_sequence #> 1            1 38.93342 -77.07974  8.8392                 36 #> 2            0 38.92353 -77.05198  0.0000                 63 #> 3            1 38.91215 -77.01222  7.9248                 19 #> 4            0 38.91594 -77.02111 10.9728                 52 #> 5            0 38.84528 -76.98762  0.0000                  2 #> 6            1 38.91702 -77.03714  0.0000                  9 #>       event_timestamp stop_id #> 1 2026-02-16 10:58:35    7752 #> 2 2026-02-16 10:58:09    7219 #> 3 2026-02-16 10:58:23   17574 #> 4 2026-02-16 10:58:31    6843 #> 5 2026-02-16 10:58:27   13111 #> 6 2026-02-16 10:58:14    6879 wmata_tides_val <- validate_tides(avl_df = wmata_avl) wmata_tides_val #>      required_field required_field_type field_present actual_field_type #> 1  location_ping_id           character          TRUE         character #> 2 trip_id_performed           character          TRUE         character #> 3   event_timestamp             POSIXct          TRUE           POSIXct #> 4        vehicle_id           character          TRUE         character #> 5       operator_id           character         FALSE              <NA> #> 6         longitude             numeric          TRUE           numeric #> 7          latitude             numeric          TRUE           numeric #> 8          distance             numeric         FALSE              <NA> #> 9             speed             numeric          TRUE           numeric #>   field_type_ok field_ok #> 1          TRUE     TRUE #> 2          TRUE     TRUE #> 3          TRUE     TRUE #> 4          TRUE     TRUE #> 5            NA    FALSE #> 6          TRUE     TRUE #> 7          TRUE     TRUE #> 8            NA    FALSE #> 9          TRUE     TRUE"},{"path":"https://obrien-ben.github.io/transittraj/articles/input-data.html","id":"gtfs-feed","dir":"Articles","previous_headings":"","what":"GTFS Feed","title":"input-data","text":"GTFS feed gives use information need effectively use AVL data. transittraj designed use tidygtfs objects tidytransit. Let’s look GTFS object wmata_gtfs, complements wmata_avl dataset saw : recommend checking tidytransit functions read, write, manipulate GTFS feeds. transittraj offers handful additional helper functions working GTFS, notably filter_by_route() get_shape_geometr(). Additionally, can also create interactive visualization GTFS feed: Try clicking routes stops see pop-information. interactive map useful deciding shape_id direction_id want work .","code":"summary(wmata_gtfs) #> tidygtfs object #> files        agency, routes, stop_times, trips, shapes, calendar, calendar_dates, stops #> agency       WMATA #> service      from 2025-12-14 to 2026-06-13 #> uses         stop_times (no frequencies) #> # routes        3 #> # trips      4167 #> # stop_ids    347 #> # stop_names  253 #> # shapes       15 plot_interactive_gtfs(gtfs = wmata_gtfs,                       color_palette = \"gtfs\")"},{"path":"https://obrien-ben.github.io/transittraj/articles/plotting-trajectories.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Plotting and Visualization Trajectory Data","text":"article deep-dive transittraj’s trajectory plotting visualization features. work progress.","code":"library(transittraj)"},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Introduction to Trajectory Objects","text":"previous vignette, saw can use transittraj clean AVL data. took care outliers, deadheading trips, noise non-monotonic observations, . vignette, ’ll apply cleaned data (c53_mono) fit trajectory function. Let’s begin loading library ’ll using:","code":"library(transittraj) library(tidytransit) library(dplyr) #>  #> Attaching package: 'dplyr' #> The following objects are masked from 'package:stats': #>  #>     filter, lag #> The following objects are masked from 'package:base': #>  #>     intersect, setdiff, setequal, union library(sf) #> Linking to GEOS 3.12.1, GDAL 3.8.4, PROJ 9.4.0; sf_use_s2() is TRUE library(ggplot2)"},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"fitting-a-trajectory-curve","dir":"Articles","previous_headings":"","what":"Fitting a Trajectory Curve","title":"Introduction to Trajectory Objects","text":"ultimate goal fit interpolating curve describing position transit vehicle point time. Ideally, fit inverse curve, giving us time transit vehicle passes point space. can using get_trajectory_fun(). transittraj supports many different methods fitting functions. simplest linear interpolation without inverse. need, can probably skip many cleaning steps previous vignette. fine-grained analyses, though, recommend fitting velocity-informed piecewise cubic interpolating polynomial. uses speeds distances, correct monotonicity, fit cubic spline observation. default, get_trajectory_fun() fit type interpolating curve (interp_method = \"monoH.FC\" use_speeds = TRUE). Using data cleaned previous vignette, let’s finally fit trajectory functions: ’s ! data cleaned, fitting trajectory quick easy; ’ve already done heavy lifting.","code":"c53_traj <- get_trajectory_fun(distance_df = c53_mono,                                interp_method = \"monoH.FC\",                                use_speeds = TRUE,                                find_inverse_fun = TRUE)"},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"exploring-the-trajectory-object","dir":"Articles","previous_headings":"","what":"Exploring the Trajectory Object","title":"Introduction to Trajectory Objects","text":"transittraj stores fit curves special object class. object stores list fit trajectories, one trip, well time distances ranges trip. can use summary() take look inside object: ’ll notice summary also contains information parameters used fit curve.","code":"summary(c53_traj) #> ------ #> AVL Group Trajectory Object #> ------ #> Number of trips: 24 #> Total distance range: 0 to 15370.75 #> Total time range: 1771257490 to 1771275553 #> ------ #> Trajectory function present: TRUE #>    --> Trajectory interpolation method: monoH.FC #>    --> Maximum derivative: 3 #>    --> Fit with speeds: TRUE #> Inverse function present: TRUE #>    --> Inverse function tolerance: 0.01 #> ------"},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"interpolating","dir":"Articles","previous_headings":"","what":"Interpolating","title":"Introduction to Trajectory Objects","text":"use fit curve actually interpolate new points? recommend using predict(), ensure curves aren’t used extrapolate beyond range trip. Using predict(), three main values can interpolate : time distances (requires inverse function), distances times, speeds times (requires spline).","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"interpolating-for-times","dir":"Articles","previous_headings":"Interpolating","what":"Interpolating for Times","title":"Introduction to Trajectory Objects","text":"One common applications fit trajectory curve find time vehicle passed point along route. , ’ll use predict() new_distances parameter. ’ll begin finding distance stop along route using get_stop_distances(): Now distances, let’s interpolate using predict(): now crossing time (labeled interp) stop, trip! interpolated times seconds epoch time.","code":"# First, use stop_times to find which stop_ids are timepoints c53_timepoints <- c53_gtfs$stop_times %>%   distinct(stop_id, timepoint) # Now, find stop distances and join the timepoints column c53_stops <- get_stop_distances(gtfs = c53_gtfs,                                 shape_geometry = c53_shape,                                 project_crs = dc_CRS) %>%   left_join(y = c53_timepoints, by = \"stop_id\") %>%   select(-shape_id) %>%   mutate(timepoint = if_else(condition = (timepoint == 1),                              true = \"Yes\",                              false = \"No\")) head(c53_stops) #> # A tibble: 6 × 3 #>   stop_id distance timepoint #>   <chr>      <dbl> <chr>     #> 1 2584        677. No        #> 2 2609        880. No        #> 3 2683       1155. No        #> 4 2793       1605. No        #> 5 2811       1807. No        #> 6 2867       2037. No c53_stop_crossings <- predict(   object = c53_traj,   new_distances = c53_stops ) head(c53_stop_crossings) #> # A tibble: 6 × 5 #>   stop_id distance timepoint trip_id_performed      interp #>   <chr>      <dbl> <chr>     <chr>                   <dbl> #> 1 2584        677. No        10185100          1771274452. #> 2 2584        677. No        10249100          1771272909. #> 3 2584        677. No        1306100           1771262814. #> 4 2584        677. No        13437100          1771259527. #> 5 2584        677. No        13478100          1771275106. #> 6 2584        677. No        1699100           1771265258."},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"interpolating-for-distances","dir":"Articles","previous_headings":"Interpolating","what":"Interpolating for Distances","title":"Introduction to Trajectory Objects","text":"Let’s say want know every vehicle certain point time. can providing new_times predict(). Let’s see : , interp distance meters route’s beginning. ’ll notice , even though 24 trips, four five distance timepoint. predict() interpolate distance trips actually running point time.","code":"c53_time_interp <- predict(   object = c53_traj,   new_times = c(1771265000, 1771275000) ) print(c53_time_interp) #>   event_timestamp trip_id_performed     interp #> 1      1771265000           1306100  8933.8531 #> 2      1771265000          18298100 10899.0966 #> 3      1771265000          21499100  4006.3031 #> 4      1771265000          21555100 13912.1101 #> 5      1771265000          22663100  6944.8919 #> 6      1771275000          10185100  2883.3087 #> 7      1771275000          10249100  7986.3226 #> 8      1771275000          13478100   140.0436 #> 9      1771275000           3597100  6792.4405"},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"interpolating-for-speeds","dir":"Articles","previous_headings":"Interpolating","what":"Interpolating for Speeds","title":"Introduction to Trajectory Objects","text":"last thing can interpolate speed given point time. can control setting deriv parameter predict(): , interp speed meters per second. Finding speeds requires starting time values.","code":"c53_speed_interp <- predict(   object = c53_traj,   new_times = c(1771265000, 1771275000),   deriv = 1 ) print(c53_speed_interp) #>   event_timestamp trip_id_performed       interp #> 1      1771265000           1306100 1.675073e-01 #> 2      1771265000          18298100 1.464849e+00 #> 3      1771265000          21499100 1.372977e+01 #> 4      1771265000          21555100 6.424041e-01 #> 5      1771265000          22663100 1.508816e+00 #> 6      1771275000          10185100 4.473051e-01 #> 7      1771275000          10249100 4.354498e-05 #> 8      1771275000          13478100 7.213864e-01 #> 9      1771275000           3597100 9.079446e-01"},{"path":[]},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"quick-plots","dir":"Articles","previous_headings":"Visualizing Trajectories","what":"Quick Plots","title":"Introduction to Trajectory Objects","text":"Now time really fun part – plotting trajectory curves. can use plot() generate quick easy plot trajectories:  plot() intended quick visualizations trajectories, allow much customization. next section, ’ll use plot_trajectory() create interesting plots.","code":"plot(c53_traj)"},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"detailed-trajectories","dir":"Articles","previous_headings":"Visualizing Trajectories","what":"Detailed Trajectories","title":"Introduction to Trajectory Objects","text":"add features (stops) customize formatting, recommend using plot_trajectory(). function starts similar plot(), taking trajectory object. , can add dataframe feature distances, c53_stops made ealier. Finally, formatting can controlled using mapping dataframes. colors linetypes trajectories features can mapped attributes using something similar : mapping dataframes, least one column must match layer mapped (trajectories features). columns must color /linetype, telling transittraj feature describe. can plug plot_trajectory() generate formatted plot:  Check help(plot_trajectory) full discussion plotting features available.","code":"stop_formatting <- data.frame(timepoint = c(\"Yes\", \"No\"),                               color = c(\"firebrick\", \"grey50\"),                               linetype = c(\"longdash\", \"dashed\")) traj_plot <- plot_trajectory(   trajectory = c53_traj,   feature_distances = c53_stops,   feature_color = stop_formatting,   feature_type = stop_formatting,   feature_width = 0.2, feature_alpha = 0.5,   traj_width = 0.4, traj_alpha = 1 ) traj_plot"},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"line-animations","dir":"Articles","previous_headings":"Visualizing Trajectories","what":"Line Animations","title":"Introduction to Trajectory Objects","text":"Another fun way visualize transit vehicle trajectories animate . Use plot_line_animation() animate vehicles, points, moving along straight line represents route. formatting process works similarly plot_line_animation() plot_trajector(). main difference vehicle trajectories features points, instead lines, must change shape attribute, rather linetype, outline, rather color: Now can generate line animation: Example coming soon.","code":"stop_formatting <- data.frame(timepoint = c(\"Yes\", \"No\"),                               outline = c(\"firebrick\", \"grey30\"),                               shape = c(22, 21)) line_anim <- plot_animated_line(   trajectory = c53_traj,   feature_distances = c53_stops,   feature_outline = stop_formatting,   feature_shape = stop_formatting,   feature_size = 2.5, feature_stroke = 1.5,   distance_lim = c(3000, 8000) )"},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectories.html","id":"map-animations","dir":"Articles","previous_headings":"Visualizing Trajectories","what":"Map Animations","title":"Introduction to Trajectory Objects","text":"Example coming soon.","code":""},{"path":"https://obrien-ben.github.io/transittraj/articles/trajectory-objects.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Understanding Trajectory Objects","text":"article deep-dive structure transittraj’s trajectory object class. work progress.","code":"library(transittraj)"},{"path":"https://obrien-ben.github.io/transittraj/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Benjamin O'Brien. Author, maintainer, copyright holder. Lewis Lehe. Author.","code":""},{"path":"https://obrien-ben.github.io/transittraj/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"O'Brien B, Lehe L (2026). transittraj: Reconstruct Visualize Transit Vehicle Trajectories. R package version 0.0.0.9000, https://github.com/obrien-ben/transittraj.","code":"@Manual{,   title = {transittraj: Reconstruct and Visualize Transit Vehicle Trajectories},   author = {Benjamin O'Brien and Lewis Lehe},   year = {2026},   note = {R package version 0.0.0.9000},   url = {https://github.com/obrien-ben/transittraj}, }"},{"path":"https://obrien-ben.github.io/transittraj/index.html","id":"transittraj","dir":"","previous_headings":"","what":"Reconstruct and Visualize Transit Vehicle Trajectories","title":"Reconstruct and Visualize Transit Vehicle Trajectories","text":"R package reconstructing visualizing transit vehicle trajectories.","code":""},{"path":"https://obrien-ben.github.io/transittraj/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Reconstruct and Visualize Transit Vehicle Trajectories","text":"can install development version transittraj GitHub : early development version transitraj. Expect change substantially without warning. ’re working : Documenting & pushing complete set tools cleaning AVL data set vignettes/articles tutorials, discussion methodologies, example applications Eventual submission CRAN","code":"# install.packages(\"pak\") pak::pak(\"obrien-ben/transittraj\")"},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_incomplete_trips.html","id":null,"dir":"Reference","previous_headings":"","what":"Filters out entire trips which do not meet distance or duration requirements. — clean_incomplete_trips","title":"Filters out entire trips which do not meet distance or duration requirements. — clean_incomplete_trips","text":"function identifies trips meet acceptable duration distance traveled ranges, large time distance gaps middle. Violating trips removed.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_incomplete_trips.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filters out entire trips which do not meet distance or duration requirements. — clean_incomplete_trips","text":"","code":"clean_incomplete_trips(   distance_df,   max_trip_distance = Inf,   min_trip_distance = -Inf,   max_trip_duration = Inf,   min_trip_duration = -Inf,   max_distance_gap = Inf,   max_time_gap = Inf,   return_removals = FALSE )"},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_incomplete_trips.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filters out entire trips which do not meet distance or duration requirements. — clean_incomplete_trips","text":"distance_df dataframe linearized AVL data. Must include trip_id_performed, event_timestamp, distance. max_trip_distance Optional. maximum distance traveled one trip, units input distance. Default Inf. min_trip_distance Optional. minimum distance traveled one trip, units input distance. Default -Inf. max_trip_duration Optional. maximum event_timestamp duration one trip, seconds. Default Inf. min_trip_duration Optional. minimum event_timestamp duration one trip, seconds. Default -Inf. max_distance_gap Optional. maximum change distance two observations, units input distance. Default Inf. max_time_gap Optional. maximum time two observations, seconds. Default Inf. return_removals Optional. boolean, function return dataframe trips removed ? Default FALSE.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_incomplete_trips.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filters out entire trips which do not meet distance or duration requirements. — clean_incomplete_trips","text":"input distance_df, violating trips removed. return_removals = TRUE, dataframe trips removed .","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_jumps.html","id":null,"dir":"Reference","previous_headings":"","what":"Applies median filters to detect large jumps (i.e., outliers) in the trajectories. — clean_jumps","title":"Applies median filters to detect large jumps (i.e., outliers) in the trajectories. — clean_jumps","text":"Noise GPS trajectories can manifest one points lying far away points recorded similar time. function identifies points using median filters. default, outliers removed. See Details discussion removal methodologies.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_jumps.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Applies median filters to detect large jumps (i.e., outliers) in the trajectories. — clean_jumps","text":"","code":"clean_jumps(   distance_df,   neighborhood_width = 7,   t_cutoff = 3,   min_median_deviation = -Inf,   max_median_deviation = Inf,   evaluate_tails = FALSE,   evaluate_implosions = FALSE,   replace_outliers = FALSE,   return_removals = FALSE )"},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_jumps.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Applies median filters to detect large jumps (i.e., outliers) in the trajectories. — clean_jumps","text":"distance_df dataframe linearized AVL data. Must include trip_id_performed, event_timestamp, distance. neighborhood_width Optional. integer representing total sliding window width around observation. Default 7 (3 either side). t_cutoff Optional. Hampel filters, number standardized MADs away consider outlier. Default 3. min_median_deviation Optional. numeric, minimum allowed deviation observation window median, units distance. Default -Inf. max_median_deviation Optional. numeric, maximum allowed deviation observation window median, units distance. Default -Inf. evaluate_tails Optional. boolean, beginning ending observations, complete window can formed, evaluated? Default FALSE. evaluate_implosions Optional. boolean, points implosion sequences evaluated? \"Implosions\" occur half window constant. Default FALSE. replace_outliers Optional. boolean, points identified outliers replaced window median? Default FALSE. return_removals Optional. boolean, function return dataframe points removed ? Default FALSE.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_jumps.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Applies median filters to detect large jumps (i.e., outliers) in the trajectories. — clean_jumps","text":"input distance_df violating points removed. return_removals = TRUE, dataframe observations removed .","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_jumps.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Applies median filters to detect large jumps (i.e., outliers) in the trajectories. — clean_jumps","text":"many different types median filters. general, filters create sliding window around point (, controlled neighborhood_width) treats point based deviation median window. function supports two main ways classifying outliers based deviation: Raw deviation: min_median_deviation max_median_deviation set bounds acceptable deviation point median window around , units input distance column. Hampel filter: Uses median absolute deviation (MAD), median deviations median. conversion factor (s = 1.48), analogous standard error. t_cutoff, , analogous acceptable window t values. can used time. multiple criteria set, point removed violates criterion. Hampel filter generally considered highly robust, recommended approach. , however, two main limitations aware : can struggle beginnings ends trips, complete window can formed. Use evaluate_tails skip . hald window value, MAD 0 observation guaranteed flagged outlier. known \"implosion\". expect noise GPS data, even vehicle standing still, unlikely. can occur, however, near trip terminals, many GPS points snap exact point route alignment. Use evaluate_implosions identify skip points implosion. point identified outlier, two possible treatments, controlled replace_outliers: Replacement window median. common approach median filters, likely appropriate AVL data. Replacement may introduce non-monotonicities. Removal point. less common approach, may sensible application, given interpolating curves fit later cleaning process.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_overlapping_subtrips.html","id":null,"dir":"Reference","previous_headings":"","what":"Removes trips with multiple overlapping operators or vehicles assigned to the same trip number. — clean_overlapping_subtrips","title":"Removes trips with multiple overlapping operators or vehicles assigned to the same trip number. — clean_overlapping_subtrips","text":"AVL vendors, multiple vehicles operators may logged trip ID time. may acceptable scenarios (e.g., vehicle/operator tradeoff mid-trip). times, may error, distinct (trip, vehicle, operator) truples running simulataneously. function identifies scenarios, gives option remove one .","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_overlapping_subtrips.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Removes trips with multiple overlapping operators or vehicles assigned to the same trip number. — clean_overlapping_subtrips","text":"","code":"clean_overlapping_subtrips(   distance_df,   check_operator = FALSE,   remove_single_observations = TRUE,   remove_non_overlapping = FALSE,   return_removals = FALSE )"},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_overlapping_subtrips.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Removes trips with multiple overlapping operators or vehicles assigned to the same trip number. — clean_overlapping_subtrips","text":"distance_df dataframe linearized AVL data. Must include event_timestamp, trip_id_performed, vehicle_id. Optionally, may include operator_id. check_operator Optional. boolean, overlaps multiple operator_ids checked ? Default FALSE. remove_single_observations Optional. boolean, subtrips one observation removed? Default TRUE. remove_non_overlapping Optional. boolean, trips multiple vehicles operators overlap removed? Default FALSE. return_removals Optional. boolean, function return dataframe trips removed ? Default FALSE.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/clean_overlapping_subtrips.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Removes trips with multiple overlapping operators or vehicles assigned to the same trip number. — clean_overlapping_subtrips","text":"input distance_df, violating trips removed. return_removals = TRUE, dataframe trip IDs reason identified removal.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/correct_speeds_fun.html","id":null,"dir":"Reference","previous_headings":"","what":"Corrects speeds to Fristch-Carlson constraints, recursively. — correct_speeds_fun","title":"Corrects speeds to Fristch-Carlson constraints, recursively. — correct_speeds_fun","text":"Internal function. intended external use.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/correct_speeds_fun.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Corrects speeds to Fristch-Carlson constraints, recursively. — correct_speeds_fun","text":"","code":"correct_speeds_fun(m_0, deltas)"},{"path":"https://obrien-ben.github.io/transittraj/reference/correct_speeds_fun.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Corrects speeds to Fristch-Carlson constraints, recursively. — correct_speeds_fun","text":"m_0 numeric vector initial slopes (observed velocities) deltas numeric vector initial FC delta values","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/correct_speeds_fun.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Corrects speeds to Fristch-Carlson constraints, recursively. — correct_speeds_fun","text":"numeric vector m_0 adjusted FC constraints","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/export_animation.html","id":null,"dir":"Reference","previous_headings":"","what":"Save your animation at a desired quality. — export_animation","title":"Save your animation at a desired quality. — export_animation","text":"function helepr gganimate's anim_save(), providing simplified, though less feature-rich, version functions. Animations saved .gifs desired path. function, publication-quality (high-resolution smooth) animations possible, take long time render.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/export_animation.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save your animation at a desired quality. — export_animation","text":"","code":"export_animation(   anim_object,   path,   duration = 30,   fps = 10,   width = 7.5,   height = 5.5,   dpi = 100 )"},{"path":"https://obrien-ben.github.io/transittraj/reference/export_animation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save your animation at a desired quality. — export_animation","text":"anim_object gganimate object. path string representing desired path name save animation. duration Optional. numeric, seconds, representing length animation. Default 30. fps Optional. frames per second saved animation. Default 10. width Optional. width exported image, inches. Default 7.5 height Optional. height exported image, inches. Default 5.5. dpi Optional. resolution, dots per inch, image. Default 100.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/filter_by_route.html","id":null,"dir":"Reference","previous_headings":"","what":"Filter GTFS to a desired route(s) and direction(s). — filter_by_route","title":"Filter GTFS to a desired route(s) and direction(s). — filter_by_route","text":"function returns new tidygtfs object information relevant desired routes directions. fields included input gtfs filtered. See Details information required files fields","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/filter_by_route.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Filter GTFS to a desired route(s) and direction(s). — filter_by_route","text":"","code":"filter_by_route(gtfs, route_ids, dir_id = NULL)"},{"path":"https://obrien-ben.github.io/transittraj/reference/filter_by_route.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Filter GTFS to a desired route(s) and direction(s). — filter_by_route","text":"gtfs tidygtfs object. route_ids numeric vector single numeric containing desired route ID(s). dir_id Optional. numeric vector single numeric containing desired direction ID(s).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/filter_by_route.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Filter GTFS to a desired route(s) and direction(s). — filter_by_route","text":"tidygtfs object containing information relevant desired route direction.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/filter_by_route.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Filter GTFS to a desired route(s) and direction(s). — filter_by_route","text":"following files fields required function: routes: route_id agency_id agency: agency_id trips: route_id, direction_id, shape_id, service_id, trip_id stop_times: stop_id trip_id following files optional. included, must include listed fields: stops: stop_id shapes: shape_id calendar: service_id calendar_dates: service_id transfers: trip_id stop_id frequencies: trip_id fare_rules: route_id feed_info optional files, function detect whether present. , filtered; , left NULL new GTFS. required file field missing, error thrown describing missing.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_gtfs_trajectory_fun.html","id":null,"dir":"Reference","previous_headings":"","what":"Fits continuous trajectory interpolating curves from GTFS schedule data. — get_gtfs_trajectory_fun","title":"Fits continuous trajectory interpolating curves from GTFS schedule data. — get_gtfs_trajectory_fun","text":"function fits continuous vehicle trajectory function scheduled GTFS stop_times, returning trajectory object. Interpolation can done linearly (interp_method = \"linear\"), via method supported stats::splinefun().","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_gtfs_trajectory_fun.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fits continuous trajectory interpolating curves from GTFS schedule data. — get_gtfs_trajectory_fun","text":"","code":"get_gtfs_trajectory_fun(   gtfs,   shape_geometry = NULL,   project_crs = 4326,   date_min = NULL,   date_max = NULL,   agency_timezone = NULL,   use_stop_time = \"departure\",   add_stop_dwell = 0,   add_distance_error = 0,   interp_method = \"linear\",   find_inverse_function = TRUE,   return_group_function = TRUE,   inv_tol = 0.01 )"},{"path":"https://obrien-ben.github.io/transittraj/reference/get_gtfs_trajectory_fun.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fits continuous trajectory interpolating curves from GTFS schedule data. — get_gtfs_trajectory_fun","text":"gtfs tidygtfs object. shape_geometry Optional. SF object project onto. Must include field shape_id. See get_shape_geometry(). Default NULL, shapes gtfs used. project_crs Optional. numeric EPSG identifer indicating coordinate system use spatial calculations. Consider setting Euclidian projection, appropriate UTM zone. Default 4326 (WGS 84 ellipsoid). date_min Optional. date object. earliest date calendar.txt create trip trajectory . Default NULL, first date calendar.txt used. date_max Optional. date object. latest date calendar.txt create trip trajectory . Default NULL, last date calendar.txt used. agency_timezone Optional. timezone string (see OlsonNames()) indicating appropriate timezone stop times. Default NULL, timezone agency.txt used. use_stop_time Optional. string, stop time column used timepoint? Must one \"arrival\" (use arrival_time), \"departure\" (use departure_time), \"\", (timepoints created stop arrival departure). Default \"departure\". add_stop_dwell Optional. numeric. use_stop_time = \"\", scheduled arrival departure times equal (.e., dwell), many seconds dwell added? adjust forward departure_time. Default 0. add_distance_error Optional. non-zero, \"flat\" observation adjusted amount forwards, units input distance. Default 0. interp_method Optional. type interpolation function fit. Either \"linear\", spline method stats::splinefun(). Default \"linear\". find_inverse_function Optional. boolean, numeric inverse function (time ~ distance) calculated? Default TRUE. return_group_function Optional. boolean, returned trajectory object grouped single function? FALSE, return list (indexed trip_id_performed) single trajectory objects. Default TRUE. inv_tol Optional. numeric units input distance, tolerance used calculating numeric inverse function. Default 0.01.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_gtfs_trajectory_fun.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fits continuous trajectory interpolating curves from GTFS schedule data. — get_gtfs_trajectory_fun","text":"return_group_function = TRUE, grouped trajectory object. FALSE, list single trajectory objects, index trip_id_performed.","code":""},{"path":[]},{"path":"https://obrien-ben.github.io/transittraj/reference/get_gtfs_trajectory_fun.html","id":"stops-dwells-and-monotonicity","dir":"Reference","previous_headings":"","what":"Stops, Dwells, and Monotonicity","title":"Fits continuous trajectory interpolating curves from GTFS schedule data. — get_gtfs_trajectory_fun","text":"fit interpolating trajectory function, observation must include distance timestamp pairs throughout trip. stop_times include shape_dist_traveled field, optional often left empty agencies. Additionally, small distortions spatial projections mean projected GPS points may align perfectly agency's calculated shape_dist_traveled. , function uses get_stop_distances() get distance stop along shape trip. Alternatively, stops trips can referenced spatial feature using shape_geometry. Consider setting project_crs spatial projection used linearize AVL GPS points. trajectory functions fit using times trip scheduled serve stop. ambiguity : stop's timestamp vehicle arrives, departs? can controlled using use_stop_time, set \"departure\" departure_time, \"arrival\" arrival_time, \"\" include departure_time arrival_time distinct observations (.e., distance & timestamp pairs). Often times, however, GTFS schedule different arrival_time departure_time values, especially timetable developed considering stop-level dwell times. scenario, may best use one departure_time arrival_time. dwell desired, use add_stop_dwell simulate dwell time stop. increase departure_time number seconds specified. Adding dwells opens new consideration, however: trajectory longer strictly monotonic, vehicle hold constant distance period time. concern find_inverse_function = TRUE, requires strictly monotonic input data. dwell times inverse function desired, consider setting add_distance_error > 0 restore strict monotonicity. See make_monotonic() details.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_gtfs_trajectory_fun.html","id":"interpolating-methods","dir":"Reference","previous_headings":"","what":"Interpolating Methods","title":"Fits continuous trajectory interpolating curves from GTFS schedule data. — get_gtfs_trajectory_fun","text":"goal function fit continuous function representing GTFS trip's scheduled distance traveled function time. function supports types interpolating curves: Linear interpolation, interp_method = \"linear\". fit simple linear function, ignorant recorded speed values. Spline interpolation, interp_method set method supported stats::splinefun() (.e., \"fmm\", \"natural\", \"periodic\", \"monoH.FC\", \"hyman\".) default, interp_method = linear, linear interpolation recommended method schedule trajectories. timetable development typically assumes constant running speed corridor, linearly connecting stop times best reflect trip's scheduled trajectory.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_gtfs_trajectory_fun.html","id":"inverse-functions","dir":"Reference","previous_headings":"","what":"Inverse Functions","title":"Fits continuous trajectory interpolating curves from GTFS schedule data. — get_gtfs_trajectory_fun","text":"Often times, concerned position vehicle particular time, vehicle crosses specific point space. can accomplished computing inverse trajectory function. find_inverse_function = TRUE (default), numeric inverse fit trajectory function found, tolerance controlled inv_tol. inverse function numerical, can found type interpolating curve (linear spline). However, input data must strictly monotonic trajectory curve invertible. find_inverse_function = TRUE, verified proceeding (see validate_monotonicity()).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_gtfs_trajectory_fun.html","id":"the-trajectory-object","dir":"Reference","previous_headings":"","what":"The Trajectory Object","title":"Fits continuous trajectory interpolating curves from GTFS schedule data. — get_gtfs_trajectory_fun","text":"trajectory function exist ; rather, requires context trip describes, well inverse function. , get_trajectory_fun() returns AVL trajectory object. return_group_function = TRUE (default), function return single object containing: vector trip_id_performeds, trip_ids found trips. list fit trajectory functions, indexed trip_id_performed. list fit inverse trajectory functions, indexed trip_id_performed. Information trajectory inverse trajectory functions fit, including interp_method, use_speeds, inv_tol. vector minimum distances, maximum distances, minimum times, maximum times trip. inform domain range trajectory function inverse, preventing extrapolation beyond time distance range actually served trip. Alternatively, return_group_function = FALSE, separate trajectory object fit trip. get_trajectory_fun() return list trajectory objects indexed trip_id_performed. information trajectory object classes use available (xyz).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_inverse_traj.html","id":null,"dir":"Reference","previous_headings":"","what":"Calculates numerical inverse of a trajectory function — get_inverse_traj","title":"Calculates numerical inverse of a trajectory function — get_inverse_traj","text":"intended external use","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_inverse_traj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Calculates numerical inverse of a trajectory function — get_inverse_traj","text":"","code":"get_inverse_traj(f, lower, upper, inv_tol)"},{"path":"https://obrien-ben.github.io/transittraj/reference/get_inverse_traj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Calculates numerical inverse of a trajectory function — get_inverse_traj","text":"f Direct traj function lower lower distance range upper upper distance range inv_tol tolerance numeric inverse","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_inverse_traj.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Calculates numerical inverse of a trajectory function — get_inverse_traj","text":"function inverse trajectory","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_linear_distances.html","id":null,"dir":"Reference","previous_headings":"","what":"Linearizes latitude-longitude GPS points to a provided route shape. — get_linear_distances","title":"Linearizes latitude-longitude GPS points to a provided route shape. — get_linear_distances","text":"functions projects raw AVL data, GPS latitude-longitude points, onto provided route geometry, returning distance point along shape beginning terminal.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_linear_distances.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Linearizes latitude-longitude GPS points to a provided route shape. — get_linear_distances","text":"","code":"get_linear_distances(   avl_df,   shape_geometry,   clip_buffer = NULL,   original_crs = 4326,   project_crs = 4326 )"},{"path":"https://obrien-ben.github.io/transittraj/reference/get_linear_distances.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Linearizes latitude-longitude GPS points to a provided route shape. — get_linear_distances","text":"avl_df dataframe raw AVL data. Must include least longitude latitude columns. See validate_tides(). shape_geometry SF object project onto. Must one shape. See get_shape_geometry(). clip_buffer Optional. distance, units used spatial projection, clip GPS points. points within distance shape_geometry kept. Default NULL, clip applied. original_crs Optional. numeric EPSG identifier. dataframe provided points, used define coordinate system longitude / latitude values. Default 4326 (WGS 84 ellipsoid). project_crs Optional. numeric EPSG identifer indicating coordinate system use spatial calculations. Consider setting Euclidian projection, appropriate UTM zone. Default 4326 (WGS 84 ellipsoid).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_linear_distances.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Linearizes latitude-longitude GPS points to a provided route shape. — get_linear_distances","text":"input avl_df latitude longitude columns replaced distance column, units spatial projection used (e.g., meters using UTM).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_shape_geometry.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the geometry of a route shape. — get_shape_geometry","title":"Get the geometry of a route shape. — get_shape_geometry","text":"function returns SF multilinestring route alignments GTFS shapes. Similar tidytransit's get_geometry(), allows filtering shape_id projection new coordinate system. See Details requirements input GTFS.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_shape_geometry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the geometry of a route shape. — get_shape_geometry","text":"","code":"get_shape_geometry(gtfs, shape = NULL, project_crs = 4326)"},{"path":"https://obrien-ben.github.io/transittraj/reference/get_shape_geometry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the geometry of a route shape. — get_shape_geometry","text":"gtfs tidygtfs object. shape Optional. GTFS shape_id use. Can single value, vector. Default NULL, shape_ids gtfs used. project_crs Optional. numeric EPSG identifer indicating coordinate system use spatial calculations. Consider setting Euclidian projection, appropriate UTM zone. Default 4326 (WGS 84 ellipsoid).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_shape_geometry.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the geometry of a route shape. — get_shape_geometry","text":"SF multilinestring, one multilinestring object per shape_id.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_shape_geometry.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get the geometry of a route shape. — get_shape_geometry","text":"shapes file must present GTFS object. file must contain least following fields: shape_id shape_pt_lat shape_pt_lon shape_pt_sequence","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_stop_distances.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the distances of stops along routes. — get_stop_distances","title":"Get the distances of stops along routes. — get_stop_distances","text":"function returns linear distance stop along route shape, starting route's beginning terminal. Unless shape_geometry provided, stops project onto shape_ids serve . shape_geometry provided, function look stops served shape.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_stop_distances.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the distances of stops along routes. — get_stop_distances","text":"","code":"get_stop_distances(gtfs, shape_geometry = NULL, project_crs = 4326)"},{"path":"https://obrien-ben.github.io/transittraj/reference/get_stop_distances.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the distances of stops along routes. — get_stop_distances","text":"gtfs tidygtfs object. shape_geometry Optional. SF object project onto. Must include field shape_id. See get_shape_geometry(). Default NULL, shapes gtfs used. project_crs Optional. numeric EPSG identifer indicating coordinate system use spatial calculations. Consider setting Euclidian projection, appropriate UTM zone. Default 4326 (WGS 84 ellipsoid).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_stop_distances.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the distances of stops along routes. — get_stop_distances","text":"dataframe containing stop_id, shape_id projected onto, distance, units spatial projection (e.g., meters using UTM).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_trajectory_fun.html","id":null,"dir":"Reference","previous_headings":"","what":"Fits continuous trajectory interpolating curves from transit AVL data. — get_trajectory_fun","title":"Fits continuous trajectory interpolating curves from transit AVL data. — get_trajectory_fun","text":"function fits continuous vehicle trajectory function observed AVL points, returning trajectory object. Interpolation can done linearly (interp_method = \"linear\"), via method supported stats::splinefun().","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_trajectory_fun.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fits continuous trajectory interpolating curves from transit AVL data. — get_trajectory_fun","text":"","code":"get_trajectory_fun(   distance_df,   interp_method = \"monoH.FC\",   use_speeds = TRUE,   find_inverse_function = TRUE,   inv_tol = 0.01,   return_group_function = TRUE )"},{"path":"https://obrien-ben.github.io/transittraj/reference/get_trajectory_fun.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fits continuous trajectory interpolating curves from transit AVL data. — get_trajectory_fun","text":"distance_df dataframe linearized AVL data. Must include trip_id_performed, event_timestamp, distance. use_speed = TRUE, must also include speed. interp_method Optional. type interpolation function fit. Either \"linear\", spline method stats::splinefun(). Default \"monoH.FC\". use_speeds Optional. boolean, curves constrained observed AVL speeds? used interp_method = \"monoH.FC\", monoH.FC require speeds. Default TRUE. find_inverse_function Optional. boolean, numeric inverse function (time ~ distance) calculated? Default TRUE. inv_tol Optional. numeric units input distance, tolerance used calculating numeric inverse function. Default 0.01. return_group_function Optional. boolean, returned trajectory object grouped single function? FALSE, return list (indexed trip_id_performed) single trajectory objects. Default TRUE.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_trajectory_fun.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fits continuous trajectory interpolating curves from transit AVL data. — get_trajectory_fun","text":"return_group_function = TRUE, grouped trajectory object. FALSE, list single trajectory objects, index trip_id_performed.","code":""},{"path":[]},{"path":"https://obrien-ben.github.io/transittraj/reference/get_trajectory_fun.html","id":"interpolating-methods","dir":"Reference","previous_headings":"","what":"Interpolating Methods","title":"Fits continuous trajectory interpolating curves from transit AVL data. — get_trajectory_fun","text":"goal function fit continuous function representing vehicle's distance traveled function time, trip. function supports types interpolating curves: Linear interpolation, interp_method = \"linear\". fit simple linear function, ignorant recorded speed values. Spline interpolation, interp_method set method supported stats::splinefun() (.e., \"fmm\", \"natural\", \"periodic\", \"monoH.FC\", \"hyman\".) interp_method = \"monoH.FC\" supports use recorded speed values. default, interp_method = \"monoH.FC\" use_speeds = TRUE. yield continuous, differentiable, monotonic, invertible trajectory, standard transit trajectory interpolation technique. input distance speed values satisfy Fritsch-Carlson, interpolating function guaranteed montonic. See make_monotonic() validate_monotonicity(). Note use_speeds = TRUE requires interp_method = \"monoH.FC\", interp_method = \"monoH.FC\" require use_speeds = TRUE. scenario, \"velocity-ignorant' Fritsch-Carlson interpolating function can created. input distance values monotonic, curve guaranteed monotonic.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_trajectory_fun.html","id":"inverse-functions","dir":"Reference","previous_headings":"","what":"Inverse Functions","title":"Fits continuous trajectory interpolating curves from transit AVL data. — get_trajectory_fun","text":"Often times, concerned position vehicle particular time, vehicle crosses specific point space. can accomplished computing inverse trajectory function. find_inverse_function = TRUE (default), numeric inverse fit trajectory function found, tolerance controlled inv_tol. inverse function numerical, can found type interpolating curve (linear spline). However, input data must strictly monotonic trajectory curve invertible. find_inverse_function = TRUE, verified proceeding (see validate_monotonicity()).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/get_trajectory_fun.html","id":"the-trajectory-object","dir":"Reference","previous_headings":"","what":"The Trajectory Object","title":"Fits continuous trajectory interpolating curves from transit AVL data. — get_trajectory_fun","text":"trajectory function exist ; rather, requires context trip describes, well inverse function. , get_trajectory_fun() returns AVL trajectory object. return_group_function = TRUE (default), function return single object containing: vector trip_id_performeds present distance_df. list fit trajectory functions, indexed trip_id_performed. list fit inverse trajectory functions, indexed trip_id_performed. Information trajectory inverse trajectory functions fit, including interp_method, use_speeds, inv_tol. vector minimum distances, maximum distances, minimum times, maximum times trip. inform domain range trajectory function inverse, preventing extrapolation beyond time distance range actually served trip. Alternatively, return_group_function = FALSE, separate trajectory object fit trip. get_trajectory_fun() return list trajectory objects indexed trip_id_performed. information trajectory object classes use available (xyz).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_distances_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Distance interpolation for group trajectories — interpolate_distances_group","title":"Distance interpolation for group trajectories — interpolate_distances_group","text":"intended external use.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_distances_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Distance interpolation for group trajectories — interpolate_distances_group","text":"","code":"interpolate_distances_group(   trip_extremes,   new_times,   trajectory_function,   deriv )"},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_distances_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Distance interpolation for group trajectories — interpolate_distances_group","text":"trip_extremes DF max min distance values new_times DF new time points trajectory_function trajectory function list deriv derivative use","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_distances_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Distance interpolation for group trajectories — interpolate_distances_group","text":"DF interpolated values","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_distances_single.html","id":null,"dir":"Reference","previous_headings":"","what":"Distance interpolation for single trajectories — interpolate_distances_single","title":"Distance interpolation for single trajectories — interpolate_distances_single","text":"intended external use.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_distances_single.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Distance interpolation for single trajectories — interpolate_distances_single","text":"","code":"interpolate_distances_single(   trip_extremes,   new_times,   trajectory_function,   deriv )"},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_distances_single.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Distance interpolation for single trajectories — interpolate_distances_single","text":"trip_extremes DF max min distance values new_times DF new time points trajectory_function trajectory function deriv derivative use","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_distances_single.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Distance interpolation for single trajectories — interpolate_distances_single","text":"DF interpolated values","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_times_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Time interpolation for grouped trajectories — interpolate_times_group","title":"Time interpolation for grouped trajectories — interpolate_times_group","text":"intended external use.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_times_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Time interpolation for grouped trajectories — interpolate_times_group","text":"","code":"interpolate_times_group(trip_extremes, new_distances, inv_trajectory_function)"},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_times_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Time interpolation for grouped trajectories — interpolate_times_group","text":"trip_extremes DF max min time values new_distances DF new distance points inv_trajectory_function Inverse trajectory function list","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_times_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Time interpolation for grouped trajectories — interpolate_times_group","text":"DF interpolated values","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_times_single.html","id":null,"dir":"Reference","previous_headings":"","what":"Time interpolation for single trajectories — interpolate_times_single","title":"Time interpolation for single trajectories — interpolate_times_single","text":"intended external use.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_times_single.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Time interpolation for single trajectories — interpolate_times_single","text":"","code":"interpolate_times_single(trip_extremes, new_distances, inv_trajectory_function)"},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_times_single.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Time interpolation for single trajectories — interpolate_times_single","text":"trip_extremes DF max min time values new_distances DF new distance points inv_trajectory_function Inverse trajectory function","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/interpolate_times_single.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Time interpolation for single trajectories — interpolate_times_single","text":"DF interpolated values","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/make_monotonic.html","id":null,"dir":"Reference","previous_headings":"","what":"Corrects distance observations, and optionally speeds, to be weakly or strictly monotonic. — make_monotonic","title":"Corrects distance observations, and optionally speeds, to be weakly or strictly monotonic. — make_monotonic","text":"Due error GPS position speed measurements, raw AVL data often monotonic, creating difficulties advanced analyses. function presents variety options correct data, resulting distance values, optionally speeds, form strictly weakly monotonic curve. See Details information.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/make_monotonic.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Corrects distance observations, and optionally speeds, to be weakly or strictly monotonic. — make_monotonic","text":"","code":"make_monotonic(   distance_df,   correct_speed = FALSE,   add_distance_error = 0,   return_changes = FALSE )"},{"path":"https://obrien-ben.github.io/transittraj/reference/make_monotonic.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Corrects distance observations, and optionally speeds, to be weakly or strictly monotonic. — make_monotonic","text":"distance_df dataframe linearized AVL data. Must include trip_id_performed, event_timestamp, distance. correct_speed = TRUE, must also include speed. correct_speed Optional. boolean, speeds corrected meet adjusted distances Fritsch-Carlson conditions? Default FALSE. add_distance_error Optional. non-zero, \"flat\" observation adjusted amount forwards, units input distance. Default 0. return_changes Optional. dataframe observation changed returned? Default FALSE.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/make_monotonic.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Corrects distance observations, and optionally speeds, to be weakly or strictly monotonic. — make_monotonic","text":"input distance_df distances speeds adjusted. return_changes = TRUE, dataframe observations changed.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/make_monotonic.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Corrects distance observations, and optionally speeds, to be weakly or strictly monotonic. — make_monotonic","text":"two primary types monotonicity: Weak monotonicity: trajectory increasing constant. make points weakly monotonic, function replaces point cumulative maximum distance value point trip. means backtracking points \"pulled \". Strict monotonicity: trajectory increasing , never constant. make points strictly monotonic, first begin weakly monotonic trajectory. , constant portions (adjacent points equal distance values) identified, add_distance_error added point. function identifies prevents \"overshoots\". Effectively, gives flat portions trajectory slight upward slope. Weak monotonicity accurately describes real transit vehicle trajectories: expect vehicle either move forwards, stand still stop. However, strict monotonicity nice mathematical property allows us find inverse trajectory (.e., retrieve time function distance). Choose two options setting add_distance_error. add_distance_error = 0 (default), weakly monotonic trajectory returned. Otherwise, trajectory strictly monotonic. addition distance corrections, applications (e.g., fitting velocity-informed interpolation spline) require speeds satisfy certain monotonic conditions. correct_speed = TRUE, following corrections made: strict monotonicity (add_distance_error > 0), speeds must non-zero. point recorded speed == 0, speed replaced add_distance_error divided time point previous point. strict weak monotonicity, speeds adjusted meet Fritsch-Carlson (1980) constraints. Often, handful input speed values adjusted. recorded speed values present, set correct_speed = FALSE. However, interested later fitting velocity-informed interpolating curve, Fritsch-Carlson's piecewise cubic polynomials, consider setting correct_speed = TRUE guarantee monotonic interpolating curve. using function perform corrections, use validate_montonicity() check weak, strict, Fritsch-Carlson speed conditions met.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/new_avltrajectory_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Constructor for grouped trajectory class — new_avltrajectory_group","title":"Constructor for grouped trajectory class — new_avltrajectory_group","text":"superclass holds single, combined trajectory function. Plus vectors trip IDs described function, vectors time & distance ranges trips. intended external use.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/new_avltrajectory_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Constructor for grouped trajectory class — new_avltrajectory_group","text":"","code":"new_avltrajectory_group(   trip_id_performed = character(),   traj_fun,   inv_traj_fun = NULL,   min_dist,   max_dist,   min_time,   max_time,   traj_type,   inv_tol = NULL,   max_deriv = 0,   used_speeds = FALSE,   ...,   class = character() )"},{"path":"https://obrien-ben.github.io/transittraj/reference/new_avltrajectory_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Constructor for grouped trajectory class — new_avltrajectory_group","text":"trip_id_performed Character trip ids. traj_fun List single trajectory functions. inv_traj_fun List single inverse trajectory functions. min_dist Vector minimum distance values. max_dist Vector maximum distance values. min_time Vector minimum time values. max_time Vector maximum time values. traj_type Interp method character string inv_tol Tolerance used numeric inverse max_deriv Max derivative allowed used_speeds Whether speeds used ... inputs class Object class","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/new_avltrajectory_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Constructor for grouped trajectory class — new_avltrajectory_group","text":"Grouped trajectory object","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/new_avltrajectory_single.html","id":null,"dir":"Reference","previous_headings":"","what":"Constructor for single trajectory class — new_avltrajectory_single","title":"Constructor for single trajectory class — new_avltrajectory_single","text":"subclass (special case) grouped trajectory, one trip. Trajectory function inteded describe one trip. Associated trip properties (ID & ranges) describe trip. intended external use.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/new_avltrajectory_single.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Constructor for single trajectory class — new_avltrajectory_single","text":"","code":"new_avltrajectory_single(   trip_id_performed = character(),   traj_fun,   inv_traj_fun = NULL,   min_dist,   max_dist,   min_time,   max_time,   traj_type,   inv_tol = NULL,   max_deriv = 0,   used_speeds = FALSE )"},{"path":"https://obrien-ben.github.io/transittraj/reference/new_avltrajectory_single.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Constructor for single trajectory class — new_avltrajectory_single","text":"trip_id_performed Character trip ids. traj_fun List single trajectory functions. inv_traj_fun List single inverse trajectory functions. min_dist Vector minimum distance values. max_dist Vector maximum distance values. min_time Vector minimum time values. max_time Vector maximum time values. traj_type Interp method character string inv_tol Tolerance used numeric inverse max_deriv Max derivative allowed used_speeds Whether speeds used","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/new_avltrajectory_single.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Constructor for single trajectory class — new_avltrajectory_single","text":"Single trajectory object","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/pipe.html","id":null,"dir":"Reference","previous_headings":"","what":"Pipe operator — %>%","title":"Pipe operator — %>%","text":"See magrittr::%>% details.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/pipe.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Pipe operator — %>%","text":"","code":"lhs %>% rhs"},{"path":"https://obrien-ben.github.io/transittraj/reference/pipe.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Pipe operator — %>%","text":"lhs value magrittr placeholder. rhs function call using magrittr semantics.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/pipe.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Pipe operator — %>%","text":"result calling rhs(lhs).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot.avltrajectory_group.html","id":null,"dir":"Reference","previous_headings":"","what":"#' Quickly plots an AVL trajectory. — plot.avltrajectory_group","title":"#' Quickly plots an AVL trajectory. — plot.avltrajectory_group","text":"function generates quick plot single grouped trajectory object. Using trajectory function, entire trajectory plotted temporal resolution 10 seconds. grouped trajectories, maximum 50 trips plotted. control plotting formatting, see plot_trajectory().","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot.avltrajectory_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"#' Quickly plots an AVL trajectory. — plot.avltrajectory_group","text":"","code":"# S3 method for class 'avltrajectory_group' plot(x, ...)  # S3 method for class 'avltrajectory_single' plot(x, ...)"},{"path":"https://obrien-ben.github.io/transittraj/reference/plot.avltrajectory_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"#' Quickly plots an AVL trajectory. — plot.avltrajectory_group","text":"x trajectory object. ... parameters (used).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot.avltrajectory_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"#' Quickly plots an AVL trajectory. — plot.avltrajectory_group","text":"ggplot2 object.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_animated_line.html","id":null,"dir":"Reference","previous_headings":"","what":"Animate vehicle trajectory or AVL data. — plot_animated_line","title":"Animate vehicle trajectory or AVL data. — plot_animated_line","text":"functions use input trajectory object TIDES AVL data animate vehicles progressing along routes. can visualized two ways: plot_animated_line() simplifies route alignment single straight line shows vehicles moving line. plot_animated_map() plots full route's alignment shows vehicles moving space. functions allow plotting spatial features labels features. gganimate object returned, can modified customized desired.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_animated_line.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Animate vehicle trajectory or AVL data. — plot_animated_line","text":"","code":"plot_animated_line(   trajectory = NULL,   distance_df = NULL,   plot_trips = NULL,   timestep = 5,   distance_lim = NULL,   center_vehicles = FALSE,   feature_distances = NULL,   transition_style = \"linear\",   route_color = \"coral\",   route_width = 3,   route_alpha = 1,   feature_shape = 21,   feature_outline = \"black\",   feature_fill = \"white\",   feature_size = 2,   feature_stroke = 1.25,   feature_alpha = 1,   veh_shape = 23,   veh_outline = \"grey30\",   veh_fill = \"white\",   veh_size = 3,   veh_stroke = 2,   veh_alpha = 0.8,   label_field = NULL,   label_size = 3,   label_alpha = 0.6,   label_pos = \"left\" )  plot_animated_map(   shape_geometry,   trajectory = NULL,   distance_df = NULL,   plot_trips = NULL,   timestep = 5,   distance_lim = NULL,   center_vehicles = FALSE,   feature_distances = NULL,   background = \"cartolight\",   background_zoom = 0,   bbox_expand = NULL,   transition_style = \"linear\",   route_color = \"coral\",   route_width = 3,   route_alpha = 1,   feature_shape = 21,   feature_outline = \"black\",   feature_fill = \"white\",   feature_size = 2,   feature_stroke = 1.25,   feature_alpha = 1,   veh_shape = 23,   veh_outline = \"grey30\",   veh_fill = \"white\",   veh_size = 3,   veh_stroke = 2,   veh_alpha = 0.8,   label_field = NULL,   label_size = 3,   label_alpha = 0.6,   label_pos = \"out\" )"},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_animated_line.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Animate vehicle trajectory or AVL data. — plot_animated_line","text":"trajectory Optional. trajectory object, either single trajectory grouped trajectory. provided, distance_df must provided. Default NULL. distance_df Optional. dataframe time distance points. Must include least event_timestamp, distance, trip_id_performed. provided, trajectory must provided. Default NULL. plot_trips Optional. vector trip_id_performeds plot. Default NULL, plot trips provided trajectory distance_df. timestep Optional. trajectory provided, time interval, seconds, interpolated observations plot. Default 5. distance_lim Optional. vector (minimum, maximum) distance values plot. center_vehicles Optional. boolean, vehicle points centered start time (0 seconds)? Default FALSE. feature_distances Optional. dataframe least numeric distance features. Default NULL. transition_style Optional. gganimate transition_style, specifying animation transitions point point. See gganimate::ease_aes(). Default \"linear\". route_color Optional. color string color route alignment. Default \"coral\". route_width Optional. numeric, linewidth route alignment. Default 3. route_alpha Optional. numeric, opacity route alignment. Default 1. feature_shape Optional. numeric specifying ggplot2 point shape, dataframe mapping attribute feature_distances shape. Must contain column shape. Default 21 (circle). feature_outline Optional. color string, dataframe mapping attribute feature_distances color. Must contain column outline. Default \"black\". feature_fill Optional. color string, inside fill feature points. Default \"white\". feature_size Optional. numeric, size feature point. Default 2. feature_stroke Optional. numeric, linewidth feature point outline. Default 1.25. feature_alpha Optional. numeric, opacity feature point. Default 1. veh_shape Optional. numeric specifying ggplot2 point shape, dataframe mapping attribute distance_df trajectory shape. Must contain column shape. Default 23 (diamond). veh_outline Optional. color string, dataframe mapping attribute distance_df trajectory color. Must contain column outline. Default \"grey30\". veh_fill Optional. color string, inside fill vehicle point. Default \"white\". veh_size Optional. numeric, size vehicle point. Default 3. veh_stroke Optional. numeric, linewidth vehicle point outline. Default 2. veh_alpha Optional. numeric, opacity vehicle point. Default 0.8. label_field Optional. string specifying column feature_distances label feature lines. Default NULL, labels plotted. label_size Optional. font size feature labels. Default 3. label_alpha Optional. opacity feature labels. Default 0.6. label_pos Optional. string specifying label position graph. Options include: plot_animated_line(): \"left\" \"right\". Default \"left\". plot_animated_map(): cardinal intermediate direction (e.g., \"N\", \"SW\", etc.), \"\"/\"\". Default \"\". shape_geometry SF object representing route alignment. See get_shape_geometry(). background Optional. OSM background (basemap) animation. See rosm::osm.image(). Default \"cartolight\". background_zoom Optional. zoom, relative \"correct\" level, background basemap. Default 0. bbox_expand Optional. distance expand plotting window directions. Default NULL, expand window 0.05% larger dimension (0.0025% distance_lim provided).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_animated_line.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Animate vehicle trajectory or AVL data. — plot_animated_line","text":"gganimate object.","code":""},{"path":[]},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_animated_line.html","id":"input-trajectory-data","dir":"Reference","previous_headings":"","what":"Input Trajectory Data","title":"Animate vehicle trajectory or AVL data. — plot_animated_line","text":"two ways provide data plotting functions: single grouped trajectory object. use direct trajectory function resolution controlled timestep. simplest, looks best zooming using distance_lim. attribute can mapped using trajectory trip_id_performed. distance_df TIDES AVL data. use distance time point pairs plotting, draw linearly . look similar plot using trajectory zoomed . useful want map formatting attributes trip_id_performed, vehicle operator ID. starting trajectory, additional control formatting desired, consider using predict() generate distance time points plot, joining desired attributes trip_id_performed column. Note one trajectory distance_df can used. (neither) provided, error thrown.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_animated_line.html","id":"features-and-labels","dir":"Reference","previous_headings":"","what":"Features and Labels","title":"Animate vehicle trajectory or AVL data. — plot_animated_line","text":"Often useful plot features route, stops/stations traffic signals passes . Use feature_distances provide information spatial features plot. row feature_distances include least distance column. rows plotted point route line. features can also labeled. Set label_name character string corresponding field feature_distances generate labels field text. color label automatically match feature describe. label placement controlled label_pos, following options available: plot_animated_line(): Either \"left\" \"right\" route line. y-value feature describes. plot_animated_map(). cardinal intermediate direction (\"N\", \"SE\", etc.) relative feature point. , \"\"/\"\", relative center plot. Note plot_animated_map() feature_distances must still linear distances, spatial datatype. retrieve distance values spatial features, see get_stop_distances() project_onto_route().","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_animated_line.html","id":"formatting-options","dir":"Reference","previous_headings":"","what":"Formatting Options","title":"Animate vehicle trajectory or AVL data. — plot_animated_line","text":"layer created ggplot2 object, difficult change formatting. , function attempts provide much flexibility formatting layers possible. resulting plot includes three layers: Route line, controlled route_color, route_width, route_alpha. Features, controlled feature_fill, feature_outline, feature_shape, feature_size, feature_alpha, feature_stroke. Labels, controlled label_size, label_alpha, label_pos. Vehicles, controlled veh_fill, veh_outline, veh_shape, veh_size, veh_alpha, veh_stroke. formats can controlled inputting single string numeric. following attributes can also modified using dataframe, mapping attributes layer: veh_shape feature_shape: dataframe one column named shape, another column sharing name column distance_df feature_distances (, using trajectory, column named trip_id_performed). values shape valid ggplot2 point shapes, values mapping column match values feature trip column. veh_outline feature_outline: dataframe one column named outline, another column sharing name column distance_df feature_distances (, using trajectory, column named trip_id_performed). values outline valid color strings, values mapping column match values feature trip column. Note inputting trajectory, instead distance_df, veh_shape veh_outline can mapped trip_id_performed. using distance_df, may mapped column distance_df (e.g., vehicle operator IDs).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_animated_line.html","id":"basemaps","dir":"Reference","previous_headings":"","what":"Basemaps","title":"Animate vehicle trajectory or AVL data. — plot_animated_line","text":"function plot_animated_map() one additional layer format: basemap beneath route alignment. OpenStreetMaps basemaps used . See full list available basemaps using rosm::osm.image(). addition map , zoom level map can adjusted using background_zoom. describe zoom level relative \"correct\" level bounding box (.e., see looked data online mapping platform). Setting negative value (zooming ) substantially speed rendering, give much lower resolution may. Finally, bounding box basemap can also set. bounding box defined relative spatial range trajectory distance_df. default expansion 0.05% (0.0025% distance_lim != NULL) larger dimension (northing easting) vehicle location bounding box. customize, det bbox_expand numeric distance units shape_geometry's spatial projection (e.g., meters using UTM projection). examples -depth discussion, see (xyz).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_df_setup.html","id":null,"dir":"Reference","previous_headings":"","what":"Set up dataframe & validate of point objects for vehicle animations — plot_df_setup","title":"Set up dataframe & validate of point objects for vehicle animations — plot_df_setup","text":"Intended internal use ","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_df_setup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Set up dataframe & validate of point objects for vehicle animations — plot_df_setup","text":"","code":"plot_df_setup(   trajectory,   distance_df,   plot_trips,   timestep,   distance_lim,   feature_distances,   center_vehicles )"},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_df_setup.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Set up dataframe & validate of point objects for vehicle animations — plot_df_setup","text":"trajectory Single grouped trajectory object. distance_df AVL distance DF. plot_trips Vector trip_id_performed plot. timestep Time seconds interpolation. distance_lim Vector (minimum, maximum) distance plot. feature_distances Linear distance features. center_vehicles vehicles centered","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_df_setup.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Set up dataframe & validate of point objects for vehicle animations — plot_df_setup","text":"plotting dataframe (trips_df)","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_format_setup.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to set up plot formats. — plot_format_setup","title":"Function to set up plot formats. — plot_format_setup","text":"Intended internal use .","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_format_setup.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to set up plot formats. — plot_format_setup","text":"","code":"plot_format_setup(plotting_df, attribute_input, attribute_type, attribute_name)"},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_format_setup.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to set up plot formats. — plot_format_setup","text":"plotting_df DF plotting, either trips features attribute_input user input value attribute (e.g., outline_input = veh_outline) attribute_type type attribute constructed (e.g., \"outline\") attribute_name name attribute (e.g., \"veh_outline\")","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_format_setup.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to set up plot formats. — plot_format_setup","text":"List : 1) new plotting_df, 2) show_legend, 3) attribute_by, 4) attribute_vals","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_interactive_gtfs.html","id":null,"dir":"Reference","previous_headings":"","what":"Generates a Leaflet viewer of GTFS routes and stops. — plot_interactive_gtfs","title":"Generates a Leaflet viewer of GTFS routes and stops. — plot_interactive_gtfs","text":"function generates simple Leaflet-based interactive map viewer GTFS. function intended quick easy visualization GTFS feed. , formatting options relatively limited.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_interactive_gtfs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Generates a Leaflet viewer of GTFS routes and stops. — plot_interactive_gtfs","text":"","code":"plot_interactive_gtfs(   gtfs,   background = \"Esri.WorldGrayCanvas\",   color_palette = \"Dark2\" )"},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_interactive_gtfs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Generates a Leaflet viewer of GTFS routes and stops. — plot_interactive_gtfs","text":"gtfs tidytransit GTFS object. background Optional. string background transit map, Leaflet's provider library (see leaflet::providers$). Default Esri's light gray canvas (\"Esri.WorldGrayCanvas\"). color_palette Optional. string Leaflet color palette color routes. \"gtfs\", use color codes GTFS routes file. Default \"Dark2\".","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_interactive_gtfs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Generates a Leaflet viewer of GTFS routes and stops. — plot_interactive_gtfs","text":"Leaftlet object.","code":""},{"path":[]},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_interactive_gtfs.html","id":"route-shapes-and-stops","dir":"Reference","previous_headings":"","what":"Route Shapes and Stops","title":"Generates a Leaflet viewer of GTFS routes and stops. — plot_interactive_gtfs","text":"primary goal function visualize explore GTFS shape, including associated route_id direction_id. function plot shapes stops present input gtfs. plot specific route direction, first feed using filter_by_route(). Routes pop-ups hover labels. hover label shows shapes's route_id (trips file). pop-show route_id, direction_id, shape_id. Stops also pop-ups hover labels. hover label show point's stop_id (stops file). pop-show stop_name stop_id.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_interactive_gtfs.html","id":"formatting","dir":"Reference","previous_headings":"","what":"Formatting","title":"Generates a Leaflet viewer of GTFS routes and stops. — plot_interactive_gtfs","text":"Two formatting options available function: basemaps route color palettes. background parameter allows customize background map plotted shapes stops. Esri's light grey canvas default, excellent providing geographic context still allowing routes stand . see available options, type leaflet::providers$ console. route colors can customized two different ways: Using gtfs's colors. Typically, routes file GTFS feed contain field route_color; color see public-facing mapping/navigation applications (e.g., Google Maps, Transit, etc.). present input gtfs feed, setting color_palette = \"gtfs\" use field color shape. Using named color palette. Without gtfs colors, function assigns colors categorically (using leaflet::colorFactor()). set palette, input string corresponding palette name RColorBrewer, palette name viridis, vector color names (length number shapes), color function. See Leaflet's colors vignette information.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_trajectory.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot vehicle trajectories or AVL data. — plot_trajectory","title":"Plot vehicle trajectories or AVL data. — plot_trajectory","text":"function use input trajectory object TIDES AVL data draw trajectory plot (.e., linear distance versus time) trip. function allows plotting spatial features labels features. ggplot2 object returned, can modified customized desired.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_trajectory.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot vehicle trajectories or AVL data. — plot_trajectory","text":"","code":"plot_trajectory(   trajectory = NULL,   distance_df = NULL,   plot_trips = NULL,   timestep = 5,   distance_lim = NULL,   center_trajectories = FALSE,   feature_distances = NULL,   traj_color = \"coral\",   traj_type = \"solid\",   traj_width = 1,   traj_alpha = 1,   feature_color = \"grey30\",   feature_type = \"dashed\",   feature_width = 0.8,   feature_alpha = 0.8,   label_field = NULL,   label_size = 3,   label_alpha = 0.6,   label_pos = \"left\" )"},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_trajectory.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot vehicle trajectories or AVL data. — plot_trajectory","text":"trajectory Optional. trajectory object, either single trajectory grouped trajectory. provided, distance_df must provided. Default NULL. distance_df Optional. dataframe time distance points. Must include least event_timestamp, distance, trip_id_performed. provided, trajectory must provided. Default NULL. plot_trips Optional. vector trip_id_performeds plot. Default NULL, plot trips provided trajectory distance_df. timestep Optional. trajectory provided, time interval, seconds, interpolated observations plot. Default 5. distance_lim Optional. vector (minimum, maximum) distance values plot. center_trajectories Optional. boolean, trajectories centered start time (0 seconds)? Default FALSE. feature_distances Optional. dataframe least numeric distance features. Default NULL. traj_color Optional. color string, dataframe mapping attribute distance_df trip_id_performed trajectory color. Must contain column color. Default \"coral\". traj_type Optional. string specifying ggplot2 linetype, dataframe mapping attribute distance_df trip_id_performed trajectory linetype. Must contain column linetype. Default \"solid\". traj_width Optional. numeric, width trajectory line. Default 1. traj_alpha Optional. numeric, opacity trajectory line. Default 1. feature_color Optional. color string, dataframe mapping attribute feature_distances color. Must contain column color. Default grey30. feature_type Optional. string specifying ggplot2 linetype, dataframe mapping attribute feature_distances linetype. Must contain column linetype. Default \"dashed\". feature_width Optional. numeric, width feature line. Default 0.8. feature_alpha Optional. numeric, opacity feature point. Default 1. label_field Optional. string specifying column feature_distances label feature lines. Default NULL, labels plotted. label_size Optional. font size feature labels. Default 3. label_alpha Optional. opacity feature labels. Default 0.6. label_pos Optional. string specifying label position graph. Must either \"left\" \"right\". Default \"left\".","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_trajectory.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot vehicle trajectories or AVL data. — plot_trajectory","text":"ggplot2 object.","code":""},{"path":[]},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_trajectory.html","id":"input-trajectory-data","dir":"Reference","previous_headings":"","what":"Input Trajectory Data","title":"Plot vehicle trajectories or AVL data. — plot_trajectory","text":"two ways provide data plotting functions: single grouped trajectory object. use direct trajectory function resolution controlled timestep. simplest, looks best zooming using distance_lim. attribute can mapped using trajectory trip_id_performed. distance_df TIDES AVL data. use distance time point pairs plotting, draw linearly . look similar plot using trajectory zoomed . useful want map formatting attributes trip_id_performed, vehicle operator ID. starting trajectory, additional control formatting desired, consider using predict() generate distance time points plot, joining desired attributes trip_id_performed column. Note one trajectory distance_df can used. (neither) provided, error thrown.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_trajectory.html","id":"features-and-labels","dir":"Reference","previous_headings":"","what":"Features and Labels","title":"Plot vehicle trajectories or AVL data. — plot_trajectory","text":"Often useful plot features route, stops/stations traffic signals passes . Use feature_distances provide information spatial features plot. row feature_distances include least distance column. rows plotted horizontal line across graph. features can also labeled. Set label_name character string corresponding field feature_distances generate labels field text. color label automatically match feature describe. label placement controlled label_pos, can set \"left\" \"right\".","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/plot_trajectory.html","id":"formatting-options","dir":"Reference","previous_headings":"","what":"Formatting Options","title":"Plot vehicle trajectories or AVL data. — plot_trajectory","text":"layer created ggplot2 object, difficult change formatting. , function attempts provide much flexibility formatting layers possible. resulting plot includes three layers: Vehicle trajectories, controlled traj_color, traj_type, traj_width, traj_alpha. Features, controlled feature_color, feature_type, feature_width, feature_alpha. Labels, controlled label_size, label_alpha, label_pos. formats can controlled inputting single string numeric. following attributes can also modified using dataframe, mapping attributes layer: traj_type feature_type: dataframe one column named linetype, another column sharing name column distance_df feature_distances (, using trajectory, column named trip_id_performed). values linetype valid ggplot2 linetypes, values mapping column match values feature trip column. traj_color feature_color: dataframe one column named color, another column sharing name column distance_df feature_distances (, using trajectory, column named trip_id_performed). values color valid color strings, values mapping column match values feature trip column. Note inputting trajectory, instead distance_df, veh_shape traj_color traj_type can mapped trip_id_performed. using distance_df, may mapped column distance_df (e.g., vehicle operator IDs).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/predict.avltrajectory_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","title":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","text":"Using function stored grouped single trajectory object, new points interpolated along trajectory. Depending whether new_times new_distances provided, function utilize direct inverse trajectory function.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/predict.avltrajectory_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","text":"","code":"# S3 method for class 'avltrajectory_group' predict(   object,   new_times = NULL,   new_distances = NULL,   deriv = 0,   trips = NULL,   ... )  # S3 method for class 'avltrajectory_single' predict(object, new_times = NULL, new_distances = NULL, deriv = 0, ...)"},{"path":"https://obrien-ben.github.io/transittraj/reference/predict.avltrajectory_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","text":"object single grouped trajectory object. new_times Optional. vector numeric timepoints, dataframe least column \"event_timestamp\" new timepoints interpolate . Default NULL. new_distances Optional. vector numeric distances, dataframe least column \"distance\" new distances interpolate . Default NULL. deriv Optional. derivative calculate . Default 0. trips Optional. vector trip_id_performeds interpolate . Default NULL, use trips found trajectory object. ... parameters (used).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/predict.avltrajectory_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","text":"input dataframe, additional column \"interp\" interpolated values requested, additional \"trip_id_performed\" column trips point within range.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/predict.avltrajectory_group.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","text":"function recommended way use fit trajectory function. key features:","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/predict.avltrajectory_group.html","id":"interpolate-for-distance-or-time","dir":"Reference","previous_headings":"","what":"Interpolate for Distance or Time","title":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","text":"new_times provided, function find distance trip new time using direct trajectory function. Conversely, new_distances provided, function find event_timestamp trip crossed distance using inverse trajectory function. input trajectory object contain inverse function, error thrown. new points can either vectors dataframes: input vector, returned value dataframe associating trip new point column interp indicating interpolated value. input dataframe, must contain column names event_timestamp distance, depending whether put new_times new_distances. columns preserved output. row duplicated trip, column interp added indicating interpolated value. latter option particularly useful finding crossing times particular features, positions notable points time. instance, new_distance may dataframe corridors, column name corridor name inout whether row entrance exit corridor. returned value append column trip_id_performed trip crosses distances, interp time trip passes entrance exit.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/predict.avltrajectory_group.html","id":"finding-derivatives","dir":"Reference","previous_headings":"","what":"Finding Derivatives","title":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","text":"Depending interp_method used fitting trajectory object, derivative may able found: interp_method = \"linear\". allow derivatives. , observation, piecewise linear function differentiable. interp_method spline stats::splinefun(). typically differentiable third degree. derivative returned (column interp) derivative distance respect time. means first derivative velocity, second acceleration, third jerk. derivative taken direct trajectory, inverse, inverse trajectory used find derivatives. means new_distances provided, deriv  must equal 0. starting distance values, derivatives desired, consider interpolating timepoints first, using new_times find derivative.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/predict.avltrajectory_group.html","id":"prevents-extrapolation","dir":"Reference","previous_headings":"","what":"Prevents Extrapolation","title":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","text":"default, many fit interpolating curves allow extrapolation (.e., input event_timestamp beyond original time domain trip). especially true splines fit using stats::splinefun(). general, reasonable transit vehicles: time points constrained time trip actually observed, distances constrained part route trip actually ran. function uses maximum minimum time distance values stored trajectory object identify input new_times new_distances beyond domain/range trip individually. returned output include interp values trips within domain/range input.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/predict.avltrajectory_group.html","id":"accessing-the-raw-trajectory-function","dir":"Reference","previous_headings":"","what":"Accessing the Raw Trajectory Function","title":"Interpolate time or distance points using AVL trajectories. — predict.avltrajectory_group","text":"features protections, recommend predict() functions used access fit trajectory inverse trajectory functions. However, raw function desired, can accessed using attr(trajectory, \"traj_fun\") attr(trajectory, \"inv_traj_fun\"). group trajectory object, return lists individual trip functions indexed trip_id_performed; single trajectory objects, return single function trip.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/print.avltrajectory_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Print function for AVL trajectories — print.avltrajectory_group","title":"Print function for AVL trajectories — print.avltrajectory_group","text":"function prints one-line report grouped single trajectory objects. single trajectory, trip ID printed. grouped trajectories, number trips printed.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/print.avltrajectory_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Print function for AVL trajectories — print.avltrajectory_group","text":"","code":"# S3 method for class 'avltrajectory_group' print(x, ...)  # S3 method for class 'avltrajectory_single' print(x, ...)"},{"path":"https://obrien-ben.github.io/transittraj/reference/print.avltrajectory_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Print function for AVL trajectories — print.avltrajectory_group","text":"x single grouped trajectory object. ... parameters (used).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/print.avltrajectory_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Print function for AVL trajectories — print.avltrajectory_group","text":"printing character string.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/project_onto_route.html","id":null,"dir":"Reference","previous_headings":"","what":"Projects points to linear distances along a route shape. — project_onto_route","title":"Projects points to linear distances along a route shape. — project_onto_route","text":"function takes spatial points projects onto route, returning linear distance beginning terminal route.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/project_onto_route.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Projects points to linear distances along a route shape. — project_onto_route","text":"","code":"project_onto_route(   shape_geometry,   points,   original_crs = 4326,   project_crs = 4326 )"},{"path":"https://obrien-ben.github.io/transittraj/reference/project_onto_route.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Projects points to linear distances along a route shape. — project_onto_route","text":"shape_geometry SF object project onto. Must include field shape_id. See get_shape_geometry(). points Can either: dataframe representing point coordinates, fields longitude latitude; , SF SFC point object. original_crs Optional. numeric EPSG identifier. dataframe provided points, used define coordinate system longitude / latitude values. Default 4326 (WGS 84 ellipsoid). project_crs Optional. numeric EPSG identifer indicating coordinate system use spatial calculations. Consider setting Euclidian projection, appropriate UTM zone. Default 4326 (WGS 84 ellipsoid).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/project_onto_route.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Projects points to linear distances along a route shape. — project_onto_route","text":"points input (either dataframe SF) appended column linear distance along route. points SFC, vector numeric distances returned. Units spatial projection used (e.g., meters using UTM).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/set_globals.html","id":null,"dir":"Reference","previous_headings":"","what":"Set global variables to use throughout, silencing notes during check. — set_globals","title":"Set global variables to use throughout, silencing notes during check. — set_globals","text":"variables generally expected standard data formats used, GTFS TIDES. Whenever one variable names must used, checks performed ensure present input data.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/summary.avltrajectory_group.html","id":null,"dir":"Reference","previous_headings":"","what":"Summary function for AVL trajectories. — summary.avltrajectory_group","title":"Summary function for AVL trajectories. — summary.avltrajectory_group","text":"function prints summary grouped single trajectory object input single trajectory, trip's ID distance & time range printed. input grouped trajectory, number trips distance & time range across trips printed. , interpolating curve methods printed.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/summary.avltrajectory_group.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summary function for AVL trajectories. — summary.avltrajectory_group","text":"","code":"# S3 method for class 'avltrajectory_group' summary(object, ...)  # S3 method for class 'avltrajectory_single' summary(object, ...)"},{"path":"https://obrien-ben.github.io/transittraj/reference/summary.avltrajectory_group.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summary function for AVL trajectories. — summary.avltrajectory_group","text":"object single grouped trajectory object. ... parameters (used).","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/summary.avltrajectory_group.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summary function for AVL trajectories. — summary.avltrajectory_group","text":"summary character string.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/trim_trips.html","id":null,"dir":"Reference","previous_headings":"","what":"Removes observations occurring before a trip's minimum distance, or after a trip's maximum distance. — trim_trips","title":"Removes observations occurring before a trip's minimum distance, or after a trip's maximum distance. — trim_trips","text":"Sometimes observations recorded trip ID vehicle still traveling opposite direction. Conversely, trip may continue recording begins traversing opposite direction. function attempts remove observations identifying trip's minimum (beginning) maximum (ending) distance, filtering observations points. ends, first occurrence beginning/maximum value used.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/trim_trips.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Removes observations occurring before a trip's minimum distance, or after a trip's maximum distance. — trim_trips","text":"","code":"trim_trips(distance_df, trim_type = \"both\", return_removals = FALSE)"},{"path":"https://obrien-ben.github.io/transittraj/reference/trim_trips.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Removes observations occurring before a trip's minimum distance, or after a trip's maximum distance. — trim_trips","text":"distance_df dataframe linearized AVL data. Must include trip_id_performed, event_timestamp, distance. trim_type Optional. string, indicating whether beginning trips, end trips, beginning end trips trimmed. Must one \"beginning\", \"end\", \"\". Default \"beginning\". return_removals Optional. boolean, function return dataframe points removed ? Default FALSE.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/trim_trips.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Removes observations occurring before a trip's minimum distance, or after a trip's maximum distance. — trim_trips","text":"input distance_df violating points removed. return_removals = TRUE, dataframe observations removed .","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_gtfs_input.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to quickly validate whether input GTFS has required tables and fields within those tables. — validate_gtfs_input","title":"Function to quickly validate whether input GTFS has required tables and fields within those tables. — validate_gtfs_input","text":"intended external use.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_gtfs_input.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to quickly validate whether input GTFS has required tables and fields within those tables. — validate_gtfs_input","text":"","code":"validate_gtfs_input(gtfs, table, needed_fields)"},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_gtfs_input.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to quickly validate whether input GTFS has required tables and fields within those tables. — validate_gtfs_input","text":"gtfs tidygtfs. table gtfs table look . needed_fields fields table look .","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_gtfs_input.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to quickly validate whether input GTFS has required tables and fields within those tables. — validate_gtfs_input","text":"Throws error satisfied","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_input_to_tides.html","id":null,"dir":"Reference","previous_headings":"","what":"Uses validate_tides and an input vector of needed fields to check whether an AVL DF meets the requirements of a given function. — validate_input_to_tides","title":"Uses validate_tides and an input vector of needed fields to check whether an AVL DF meets the requirements of a given function. — validate_input_to_tides","text":"Intended internal use .","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_input_to_tides.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Uses validate_tides and an input vector of needed fields to check whether an AVL DF meets the requirements of a given function. — validate_input_to_tides","text":"","code":"validate_input_to_tides(needed_fields, avl_df)"},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_input_to_tides.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Uses validate_tides and an input vector of needed fields to check whether an AVL DF meets the requirements of a given function. — validate_input_to_tides","text":"needed_fields Vector fields desired avl_df DF TIDES AVL data","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_input_to_tides.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Uses validate_tides and an input vector of needed fields to check whether an AVL DF meets the requirements of a given function. — validate_input_to_tides","text":"boolean field","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_monotonicity.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if an AVL dataframe satisfies assumptions of monotonicity. — validate_monotonicity","title":"Check if an AVL dataframe satisfies assumptions of monotonicity. — validate_monotonicity","text":"function checks whether provided AVL dataframe linearized distances satisfies three conditions: Weak monotonicity, either flat increasing Strict monotonicty, increasing Speeds satisfy Fritsch-Carlson constraints See make_monotonic() information.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_monotonicity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if an AVL dataframe satisfies assumptions of monotonicity. — validate_monotonicity","text":"","code":"validate_monotonicity(distance_df, check_speed = FALSE, return_full = FALSE)"},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_monotonicity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if an AVL dataframe satisfies assumptions of monotonicity. — validate_monotonicity","text":"distance_df dataframe linearized AVL data. Must include trip_id_performed, event_timestamp, distance. check_speed = TRUE, must also include speed. check_speed Optional. boolean, Fritsch-Carlson conditions return_full Optional. dataframe point checked returned? Default FALSE. slopes checked? Default FALSE, speed check return NA.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_monotonicity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if an AVL dataframe satisfies assumptions of monotonicity. — validate_monotonicity","text":"named vector booleans indicating whether three conditions satisfied.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_shape_geometry.html","id":null,"dir":"Reference","previous_headings":"","what":"Function to quickly validate whether an input shape_geometry meets needs — validate_shape_geometry","title":"Function to quickly validate whether an input shape_geometry meets needs — validate_shape_geometry","text":"Checks: Class (SF, SFC) Geometry type (.e., multilinestring) Presence shape_id column, desired Number shapes present, desired Correct CRS, desired","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_shape_geometry.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Function to quickly validate whether an input shape_geometry meets needs — validate_shape_geometry","text":"","code":"validate_shape_geometry(   shape_geometry,   max_length = Inf,   require_shape_id = TRUE,   match_crs = NULL )"},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_shape_geometry.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Function to quickly validate whether an input shape_geometry meets needs — validate_shape_geometry","text":"shape_geometry SF multilinestring max_length numeric max number objects SF require_shape_id shape ID required SF? match_crs CRS SF ","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_shape_geometry.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Function to quickly validate whether an input shape_geometry meets needs — validate_shape_geometry","text":"Throws error satisfied","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_shape_geometry.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Function to quickly validate whether an input shape_geometry meets needs — validate_shape_geometry","text":"intended external use.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_tides.html","id":null,"dir":"Reference","previous_headings":"","what":"Check if an AVL dataframe meets TIDES standards. — validate_tides","title":"Check if an AVL dataframe meets TIDES standards. — validate_tides","text":"transit integrated data exchange standard (TIDES) specifies columns present AVL data tables data types columns. function verifies columns present input avl_df, columns correct data type. See Details information.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_tides.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Check if an AVL dataframe meets TIDES standards. — validate_tides","text":"","code":"validate_tides(avl_df)"},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_tides.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Check if an AVL dataframe meets TIDES standards. — validate_tides","text":"avl_df dataframe AVL data, either GPS (longitude/latitude) form linearized distance form.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_tides.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Check if an AVL dataframe meets TIDES standards. — validate_tides","text":"dataframe required field, required data type, whether field present, whether data type matches expectations.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/validate_tides.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Check if an AVL dataframe meets TIDES standards. — validate_tides","text":"AVL cleaning functions package generally require input dataframes adhere TIDES vehicle_locations table schema. following columns data types checked validator: location_ping_id: character string. trip_id_performed: character string. event_timestamp: POSIXct date-time. vehicle_id: character string. operator_id: character string. field standard TIDES vehicle_locations, strict requirement AVL processing functions. longitude latitude: numeric. fields required linearize AVL data, used afterwards. distance: numeric. field standard TIDES vehicle_locations, generated get_linear_distances(). required AVL processing functions. speed: numeric. field strict requirement AVL processing functions. AVL processing function transittraj uses specific fields. function verifies required fields data types present proceeding.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_avl.html","id":null,"dir":"Reference","previous_headings":"","what":"WMATA Bus Automatic Vehicle Location Data — wmata_avl","title":"WMATA Bus Automatic Vehicle Location Data — wmata_avl","text":"dataset archive WMATA's public GTFS-realtime feed, accessed developer API. reformatted GTFS-rt match TIDES standard fields datatypes. dataset intended used alongside static GTFS feed provided wmata_gtfs.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_avl.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"WMATA Bus Automatic Vehicle Location Data — wmata_avl","text":"","code":"wmata_avl"},{"path":[]},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_avl.html","id":"wmata-avl","dir":"Reference","previous_headings":"","what":"wmata_avl","title":"WMATA Bus Automatic Vehicle Location Data — wmata_avl","text":"dataframe 20,777 rows 12 columns. location_ping_id unique ID row vehicle_id ID corresponding vehicle trip_id_performed Trip IDs, matching GTFS service_date data trip's beginning route_id Route IDs, matching GTFS direction_id Direction IDs, matching GTFS latitude, longitude GPS ping longitude latitude speed recorded speed, meters per second trip_stop_sequence stop number vehicle approaching event_timestamp POSIXct time objects stop_id Stop IDs vehicles approaching, matching GTFS","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_avl.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"WMATA Bus Automatic Vehicle Location Data — wmata_avl","text":"https://developer.wmata.com/","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_avl.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"WMATA Bus Automatic Vehicle Location Data — wmata_avl","text":"dataset contains three bus routes, two directions : D40: Georgia Ave C53 U St/Congress Heights D96: Mass Ave Bethesda","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_gtfs.html","id":null,"dir":"Reference","previous_headings":"","what":"WMATA Bus GTFS — wmata_gtfs","title":"WMATA Bus GTFS — wmata_gtfs","text":"dataset portion WMATA's bus GTFS, first published Dec 14, 2025 valid June 13, 2026, accessed TransitLand. dataset intended used alongside archived GTFS-realtime feed provided wmata_avl.","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_gtfs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"WMATA Bus GTFS — wmata_gtfs","text":"","code":"wmata_gtfs"},{"path":[]},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_gtfs.html","id":"wmata-gtfs","dir":"Reference","previous_headings":"","what":"wmata_gtfs","title":"WMATA Bus GTFS — wmata_gtfs","text":"tidytransit object (list) 8 files. agency GTFS agency.txt file routes GTFS routes.txt file trips GTFS trips.txt file stop_times GTFS stop_times.txt file stops GTFS stops.txt file shapes GTFS shapes.txt file calendar GTFS calendar.txt file calendar_dates GTFS calendar_dates.txt file","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_gtfs.html","id":"source","dir":"Reference","previous_headings":"","what":"Source","title":"WMATA Bus GTFS — wmata_gtfs","text":"https://www.transit.land/feeds/f-dqc-wmata~bus","code":""},{"path":"https://obrien-ben.github.io/transittraj/reference/wmata_gtfs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"WMATA Bus GTFS — wmata_gtfs","text":"dataset filtered three routes, two directions : D40: Georgia Ave C53 U St/Congress Heights D96: Mass Ave toBethesda","code":""}]
